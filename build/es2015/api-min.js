(function(u,f){'object'==typeof exports&&'object'==typeof module?module.exports=f():'function'==typeof define&&define.amd?define([],f):'object'==typeof exports?exports.io=f():u.io=f()})(this,function(){return function(t){function u(g){if(f[g])return f[g].exports;var _=f[g]={exports:{},id:g,loaded:!1};return t[g].call(_.exports,_,_.exports,u),_.loaded=!0,_.exports}var f={};return u.m=t,u.c=f,u.p='',u(0)}([function(t,u,f){'use strict';function g(T,R){'object'===('undefined'==typeof T?'undefined':k(T))&&(R=T,T=void 0),R=R||{};var P=C(T),D=P.source,O=P.id,B=P.path,N=S[O]&&B in S[O].nsps,I=R.forceNew||R['force new connection']||!1===R.multiplex||N,L;return I?(w('ignoring socket cache for %s',D),L=A(D,R)):(!S[O]&&(w('new io instance for %s',D),S[O]=A(D,R)),L=S[O]),P.query&&!R.query?R.query=P.query:R&&'object'===k(R.query)&&(R.query=_(R.query)),L.socket(P.path,R)}function _(T){var R=[];for(var P in T)T.hasOwnProperty(P)&&R.push(encodeURIComponent(P)+'='+encodeURIComponent(T[P]));return R.join('&')}var k='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&'function'==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?'symbol':typeof T},C=f(1),E=f(6),A=f(13),w=f(3)('socket.io-client');t.exports=u=g;var S=u.managers={};u.protocol=E.protocol,u.connect=g,u.Manager=f(13),u.Socket=f(40)},function(t,u,f){(function(g){'use strict';var _=f(2),k=f(3)('socket.io-client:url');t.exports=function(E,A){var w=E;A=A||g.location,null==E&&(E=A.protocol+'//'+A.host),'string'==typeof E&&('/'===E.charAt(0)&&('/'===E.charAt(1)?E=A.protocol+E:E=A.host+E),!/^(https?|wss?):\/\//.test(E)&&(k('protocol-less url %s',E),E='undefined'==typeof A?'https://'+E:A.protocol+'//'+E),k('parse %s',E),w=_(E)),w.port||(/^(http|ws)$/.test(w.protocol)?w.port='80':/^(http|ws)s$/.test(w.protocol)&&(w.port='443')),w.path=w.path||'/';var S=-1!==w.host.indexOf(':'),T=S?'['+w.host+']':w.host;return w.id=w.protocol+'://'+T+':'+w.port,w.href=w.protocol+'://'+T+(A&&A.port===w.port?'':':'+w.port),w}}).call(u,function(){return this}())},function(t,u){var f=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];t.exports=function(k){var C=k,E=k.indexOf('['),A=k.indexOf(']');-1!=E&&-1!=A&&(k=k.substring(0,E)+k.substring(E,A).replace(/:/g,';')+k.substring(A,k.length));for(var w=f.exec(k||''),S={},T=14;T--;)S[g[T]]=w[T]||'';return-1!=E&&-1!=A&&(S.source=C,S.host=S.host.substring(1,S.host.length-1).replace(/;/g,':'),S.authority=S.authority.replace('[','').replace(']','').replace(/;/g,':'),S.ipv6uri=!0),S}},function(t,u,f){function g(){var _;try{_=u.storage.debug}catch(k){}return _}u=t.exports=f(4),u.log=function(){return'object'==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},u.formatArgs=function(){var k=arguments,C=this.useColors;if(k[0]=(C?'%c':'')+this.namespace+(C?' %c':' ')+k[0]+(C?'%c ':' ')+'+'+u.humanize(this.diff),!C)return k;var E='color: '+this.color;k=[k[0],E,'color: inherit'].concat(Array.prototype.slice.call(k,1));var A=0,w=0;return k[0].replace(/%[a-z%]/g,function(S){'%%'===S||(A++,'%c'===S&&(w=A))}),k.splice(w,0,E),k},u.save=function(k){try{null==k?u.storage.removeItem('debug'):u.storage.debug=k}catch(C){}},u.load=g,u.useColors=function(){return'WebkitAppearance'in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},u.storage='undefined'!=typeof chrome&&'undefined'!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(k){}}(),u.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'],u.formatters.j=function(_){return JSON.stringify(_)},u.enable(g())},function(t,u,f){function g(){return u.colors[_++%u.colors.length]}u=t.exports=function(E){function A(){}function w(){var T=w,R=+new Date,P=R-(k||R);T.diff=P,T.prev=k,T.curr=R,k=R,null==T.useColors&&(T.useColors=u.useColors()),null==T.color&&T.useColors&&(T.color=g());var D=Array.prototype.slice.call(arguments);D[0]=u.coerce(D[0]),'string'!=typeof D[0]&&(D=['%o'].concat(D));var O=0;D[0]=D[0].replace(/%([a-z%])/g,function(N,I){if('%%'===N)return N;O++;var L=u.formatters[I];if('function'==typeof L){var U=D[O];N=L.call(T,U),D.splice(O,1),O--}return N}),'function'==typeof u.formatArgs&&(D=u.formatArgs.apply(T,D));var B=w.log||u.log||console.log.bind(console);B.apply(T,D)}A.enabled=!1,w.enabled=!0;var S=u.enabled(E)?w:A;return S.namespace=E,S},u.coerce=function(E){return E instanceof Error?E.stack||E.message:E},u.disable=function(){u.enable('')},u.enable=function(E){u.save(E);var A=(E||'').split(/[\s,]+/),w=A.length;for(var S=0;S<w;S++)A[S]&&(E=A[S].replace(/\*/g,'.*?'),'-'===E[0]?u.skips.push(new RegExp('^'+E.substr(1)+'$')):u.names.push(new RegExp('^'+E+'$')))},u.enabled=function(E){var A,w;for(A=0,w=u.skips.length;A<w;A++)if(u.skips[A].test(E))return!1;for(A=0,w=u.names.length;A<w;A++)if(u.names[A].test(E))return!0;return!1},u.humanize=f(5),u.names=[],u.skips=[],u.formatters={};var _=0,k},function(t,u){function f(S){if(S=''+S,!(10000<S.length)){var T=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(S);if(T){var R=parseFloat(T[1]),P=(T[2]||'ms').toLowerCase();switch(P){case'years':case'year':case'yrs':case'yr':case'y':return R*(365.25*w);case'days':case'day':case'd':return R*w;case'hours':case'hour':case'hrs':case'hr':case'h':return R*A;case'minutes':case'minute':case'mins':case'min':case'm':return R*E;case'seconds':case'second':case'secs':case'sec':case's':return R*C;case'milliseconds':case'millisecond':case'msecs':case'msec':case'ms':return R;}}}}function g(S){return S>=w?Math.round(S/w)+'d':S>=A?Math.round(S/A)+'h':S>=E?Math.round(S/E)+'m':S>=C?Math.round(S/C)+'s':S+'ms'}function _(S){return k(S,w,'day')||k(S,A,'hour')||k(S,E,'minute')||k(S,C,'second')||S+' ms'}function k(S,T,R){if(!(S<T))return S<1.5*T?Math.floor(S/T)+' '+R:Math.ceil(S/T)+' '+R+'s'}var C=1000,E=60*C,A=60*E,w=24*A;t.exports=function(S,T){return T=T||{},'string'==typeof S?f(S):T.long?_(S):g(S)}},function(t,u,f){function g(){}function _(O){var B='',N=!1;return B+=O.type,(u.BINARY_EVENT==O.type||u.BINARY_ACK==O.type)&&(B+=O.attachments,B+='-'),O.nsp&&'/'!=O.nsp&&(N=!0,B+=O.nsp),null!=O.id&&(N&&(B+=',',N=!1),B+=O.id),null!=O.data&&(N&&(B+=','),B+=T.stringify(O.data)),S('encoded %j as %s',O,B),B}function k(O,B){P.removeBlobs(O,function(I){var L=P.deconstructPacket(I),U=_(L.packet),q=L.buffers;q.unshift(U),B(q)})}function C(){this.reconstructor=null}function E(O){var B={},N=0;if(B.type=+O.charAt(0),null==u.types[B.type])return w();if(u.BINARY_EVENT==B.type||u.BINARY_ACK==B.type){for(var I='';'-'!=O.charAt(++N)&&(I+=O.charAt(N),N!=O.length););if(I!=+I||'-'!=O.charAt(N))throw new Error('Illegal attachments');B.attachments=+I}if('/'==O.charAt(N+1))for(B.nsp='';++N;){var L=O.charAt(N);if(','==L)break;if(B.nsp+=L,N==O.length)break}else B.nsp='/';var U=O.charAt(N+1);if(''!==U&&+U==U){for(B.id='';++N;){var L=O.charAt(N);if(null==L||+L!=L){--N;break}if(B.id+=O.charAt(N),N==O.length)break}B.id=+B.id}if(O.charAt(++N))try{B.data=T.parse(O.substr(N))}catch(q){return w()}return S('decoded %s as %j',O,B),B}function A(O){this.reconPack=O,this.buffers=[]}function w(O){return{type:u.ERROR,data:'parser error'}}var S=f(3)('socket.io-parser'),T=f(7);f(9);var R=f(10),P=f(11),D=f(12);u.protocol=4,u.types=['CONNECT','DISCONNECT','EVENT','ACK','ERROR','BINARY_EVENT','BINARY_ACK'],u.CONNECT=0,u.DISCONNECT=1,u.EVENT=2,u.ACK=3,u.ERROR=4,u.BINARY_EVENT=5,u.BINARY_ACK=6,u.Encoder=g,u.Decoder=C,g.prototype.encode=function(O,B){if(S('encoding packet %j',O),u.BINARY_EVENT==O.type||u.BINARY_ACK==O.type)k(O,B);else{var N=_(O);B([N])}},R(C.prototype),C.prototype.add=function(O){var B;if('string'==typeof O)B=E(O),u.BINARY_EVENT==B.type||u.BINARY_ACK==B.type?(this.reconstructor=new A(B),0===this.reconstructor.reconPack.attachments&&this.emit('decoded',B)):this.emit('decoded',B);else if(!(D(O)||O.base64))throw new Error('Unknown type: '+O);else if(!this.reconstructor)throw new Error('got binary data when not reconstructing a packet');else B=this.reconstructor.takeBinaryData(O),B&&(this.reconstructor=null,this.emit('decoded',B))},C.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},A.prototype.takeBinaryData=function(O){if(this.buffers.push(O),this.buffers.length==this.reconPack.attachments){var B=P.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),B}return null},A.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,u,f){(function(g,_){var k=!1;;(function(){function C(B,N){function I(_e){if(I[_e]!==X)return I[_e];var ke;if('bug-string-char-index'==_e)ke='a'!='a'[0];else if('json'==_e)ke=I('json-stringify')&&I('json-parse');else{var Ee='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',Ce;if('json-stringify'==_e){var Ae=N.stringify,we='function'==typeof Ae&&K;if(we){(Ce=function(){return 1}).toJSON=Ce;try{we='0'===Ae(0)&&'0'===Ae(new L)&&'""'==Ae(new U)&&Ae(Y)===X&&Ae(X)===X&&Ae()===X&&'1'===Ae(Ce)&&'[1]'==Ae([Ce])&&'[null]'==Ae([X])&&'null'==Ae(null)&&'[null,null,null]'==Ae([X,Y,null])&&Ae({a:[Ce,!0,!1,null,'\0\b\n\f\r\t']})==Ee&&'1'===Ae(null,Ce)&&'[\n 1,\n 2\n]'==Ae([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==Ae(new M(-8640000000000000))&&'"+275760-09-13T00:00:00.000Z"'==Ae(new M(8640000000000000))&&'"-000001-01-01T00:00:00.000Z"'==Ae(new M(-62198755200000))&&'"1969-12-31T23:59:59.999Z"'==Ae(new M(-1))}catch(ve){we=!1}}ke=we}if('json-parse'==_e){var Se=N.parse;if('function'==typeof Se)try{if(0===Se('0')&&!Se(!1)){Ce=Se(Ee);var xe=5==Ce.a.length&&1===Ce.a[0];if(xe){try{xe=!Se('"\t"')}catch(ve){}if(xe)try{xe=1!==Se('01')}catch(ve){}if(xe)try{xe=1!==Se('1.')}catch(ve){}}}}catch(ve){xe=!1}ke=xe}}return I[_e]=!!ke}B||(B=S.Object()),N||(N=S.Object());var L=B.Number||S.Number,U=B.String||S.String,q=B.Object||S.Object,M=B.Date||S.Date,F=B.SyntaxError||S.SyntaxError,H=B.TypeError||S.TypeError,z=B.Math||S.Math,J=B.JSON||S.JSON;'object'==typeof J&&J&&(N.stringify=J.stringify,N.parse=J.parse);var V=q.prototype,Y=V.toString,K=new M(-3509827334573292),Q,W,X;try{K=-109252==K.getUTCFullYear()&&0===K.getUTCMonth()&&1===K.getUTCDate()&&10==K.getUTCHours()&&37==K.getUTCMinutes()&&6==K.getUTCSeconds()&&708==K.getUTCMilliseconds()}catch(_e){}if(!I('json')){var G='[object Function]',$='[object Number]',Z='[object String]',ee='[object Array]',te=I('bug-string-char-index');if(!K)var oe=z.floor,ne=[0,31,59,90,120,151,181,212,243,273,304,334],ae=function(_e,ke){return ne[ke]+365*(_e-1970)+oe((_e-1969+(ke=+(1<ke)))/4)-oe((_e-1901+ke)/100)+oe((_e-1601+ke)/400)};if((Q=V.hasOwnProperty)||(Q=function(_e){var ke={},Ce;return(ke.__proto__=null,ke.__proto__={toString:1},ke).toString==Y?(Ce=ke.constructor,Q=function(Ee){var Ae=(this.constructor||Ce).prototype;return Ee in this&&!(Ee in Ae&&this[Ee]===Ae[Ee])}):Q=function(Ee){var Ae=this.__proto__,we=Ee in(this.__proto__=null,this);return this.__proto__=Ae,we},ke=null,Q.call(this,_e)}),W=function(_e,ke){var Ce=0,Ee,Ae,we;for(we in(Ee=function(){this.valueOf=0}).prototype.valueOf=0,Ae=new Ee,Ae)Q.call(Ae,we)&&Ce++;return Ee=Ae=null,Ce?2==Ce?W=function(Se,xe){var ve={},Te=Y.call(Se)==G,Re;for(Re in Se)!(Te&&'prototype'==Re)&&!Q.call(ve,Re)&&(ve[Re]=1)&&Q.call(Se,Re)&&xe(Re)}:W=function(Se,xe){var ve=Y.call(Se)==G,Te,Re;for(Te in Se)ve&&'prototype'==Te||!Q.call(Se,Te)||(Re='constructor'===Te)||xe(Te);(Re||Q.call(Se,Te='constructor'))&&xe(Te)}:(Ae=['valueOf','toString','toLocaleString','propertyIsEnumerable','isPrototypeOf','hasOwnProperty','constructor'],W=function(Se,xe){var ve=Y.call(Se)==G,Pe=!ve&&'function'!=typeof Se.constructor&&A[typeof Se.hasOwnProperty]&&Se.hasOwnProperty||Q,Te,Re;for(Te in Se)!(ve&&'prototype'==Te)&&Pe.call(Se,Te)&&xe(Te);for(Re=Ae.length;Te=Ae[--Re];Pe.call(Se,Te)&&xe(Te));}),W(_e,ke)},!I('json-stringify')){var se={'8':'\\b','9':'\\t','10':'\\n','12':'\\f','13':'\\r','34':'\\"','92':'\\\\'},ie=function(_e,ke){return('000000'+(ke||0)).slice(-_e)},le=function(_e){for(var ke='"',Ce=0,Ee=_e.length,Ae=!te||10<Ee,we=Ae&&(te?_e.split(''):_e);Ce<Ee;Ce++){var Se=_e.charCodeAt(Ce);switch(Se){case 8:case 9:case 10:case 12:case 13:case 34:case 92:ke+=se[Se];break;default:if(32>Se){ke+='\\u00'+ie(2,Se.toString(16));break}ke+=Ae?we[Ce]:_e.charAt(Ce);}}return ke+'"'},pe=function(_e,ke,Ce,Ee,Ae,we,Se){var xe,ve,Te,Re,Pe,De,Oe,Be,Ne,Ie,Le,Ue,je,qe,Me,Fe;try{xe=ke[_e]}catch(He){}if('object'==typeof xe&&xe)if(ve=Y.call(xe),'[object Date]'!=ve||Q.call(xe,'toJSON'))'function'==typeof xe.toJSON&&(ve!=$&&ve!=Z&&ve!=ee||Q.call(xe,'toJSON'))&&(xe=xe.toJSON(_e));else if(xe>-1/0&&xe<1/0){if(ae){for(Pe=oe(xe/86400000),Te=oe(Pe/365.2425)+1970-1;ae(Te+1,0)<=Pe;Te++);for(Re=oe((Pe-ae(Te,0))/30.42);ae(Te,Re+1)<=Pe;Re++);Pe=1+Pe-ae(Te,Re),De=(xe%86400000+86400000)%86400000,Oe=oe(De/3600000)%24,Be=oe(De/60000)%60,Ne=oe(De/1000)%60,Ie=De%1000}else Te=xe.getUTCFullYear(),Re=xe.getUTCMonth(),Pe=xe.getUTCDate(),Oe=xe.getUTCHours(),Be=xe.getUTCMinutes(),Ne=xe.getUTCSeconds(),Ie=xe.getUTCMilliseconds();xe=(0>=Te||10000<=Te?(0>Te?'-':'+')+ie(6,0>Te?-Te:Te):ie(4,Te))+'-'+ie(2,Re+1)+'-'+ie(2,Pe)+'T'+ie(2,Oe)+':'+ie(2,Be)+':'+ie(2,Ne)+'.'+ie(3,Ie)+'Z'}else xe=null;if(Ce&&(xe=Ce.call(ke,_e,xe)),null===xe)return'null';if(ve=Y.call(xe),'[object Boolean]'==ve)return''+xe;if(ve==$)return xe>-1/0&&xe<1/0?''+xe:'null';if(ve==Z)return le(''+xe);if('object'==typeof xe){for(qe=Se.length;qe--;)if(Se[qe]===xe)throw H();if(Se.push(xe),Le=[],Me=we,we+=Ae,ve==ee){for(je=0,qe=xe.length;je<qe;je++)Ue=pe(je,xe,Ce,Ee,Ae,we,Se),Le.push(Ue==X?'null':Ue);Fe=Le.length?Ae?'[\n'+we+Le.join(',\n'+we)+'\n'+Me+']':'['+Le.join(',')+']':'[]'}else W(Ee||xe,function(He){var ze=pe(He,xe,Ce,Ee,Ae,we,Se);ze!==X&&Le.push(le(He)+':'+(Ae?' ':'')+ze)}),Fe=Le.length?Ae?'{\n'+we+Le.join(',\n'+we)+'\n'+Me+'}':'{'+Le.join(',')+'}':'{}';return Se.pop(),Fe}};N.stringify=function(_e,ke,Ce){var Ee,Ae,we,Se;if(A[typeof ke]&&ke)if((Se=Y.call(ke))==G)Ae=ke;else if(Se==ee){we={};for(var xe=0,ve=ke.length,Te;xe<ve;Te=ke[xe++],(Se=Y.call(Te),Se==Z||Se==$)&&(we[Te]=1));}if(Ce)if((Se=Y.call(Ce))!=$)Se==Z&&(Ee=10>=Ce.length?Ce:Ce.slice(0,10));else if(0<(Ce-=Ce%1))for(Ee='',10<Ce&&(Ce=10);Ee.length<Ce;Ee+=' ');return pe('',(Te={},Te['']=_e,Te),Ae,we,Ee,'',[])}}if(!I('json-parse')){var ce=U.fromCharCode,de={'34':'"','47':'/','92':'\\','98':'\b','102':'\f','110':'\n','114':'\r','116':'\t'},ye=function(){throw ue=he=null,F()},fe=function(){for(var _e=he,ke=_e.length,Ce,Ee,Ae,we,Se;ue<ke;)switch(Se=_e.charCodeAt(ue),Se){case 9:case 10:case 13:case 32:ue++;break;case 123:case 125:case 91:case 93:case 58:case 44:return Ce=te?_e.charAt(ue):_e[ue],ue++,Ce;case 34:for(Ce='@',ue++;ue<ke;)if(Se=_e.charCodeAt(ue),32>Se)ye();else if(92==Se)switch(Se=_e.charCodeAt(++ue),Se){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:Ce+=de[Se],ue++;break;case 117:for(Ee=++ue,Ae=ue+4;ue<Ae;ue++)Se=_e.charCodeAt(ue),48<=Se&&57>=Se||97<=Se&&102>=Se||65<=Se&&70>=Se||ye();Ce+=ce('0x'+_e.slice(Ee,ue));break;default:ye();}else{if(34==Se)break;for(Se=_e.charCodeAt(ue),Ee=ue;32<=Se&&92!=Se&&34!=Se;)Se=_e.charCodeAt(++ue);Ce+=_e.slice(Ee,ue)}if(34==_e.charCodeAt(ue))return ue++,Ce;ye();default:if(Ee=ue,45==Se&&(we=!0,Se=_e.charCodeAt(++ue)),48<=Se&&57>=Se){for(48==Se&&(Se=_e.charCodeAt(ue+1),48<=Se&&57>=Se)&&ye(),we=!1;ue<ke&&(Se=_e.charCodeAt(ue),48<=Se&&57>=Se);ue++);if(46==_e.charCodeAt(ue)){for(Ae=++ue;Ae<ke&&(Se=_e.charCodeAt(Ae),48<=Se&&57>=Se);Ae++);Ae==ue&&ye(),ue=Ae}if(Se=_e.charCodeAt(ue),101==Se||69==Se){for(Se=_e.charCodeAt(++ue),(43==Se||45==Se)&&ue++,Ae=ue;Ae<ke&&(Se=_e.charCodeAt(Ae),48<=Se&&57>=Se);Ae++);Ae==ue&&ye(),ue=Ae}return+_e.slice(Ee,ue)}if(we&&ye(),'true'==_e.slice(ue,ue+4))return ue+=4,!0;if('false'==_e.slice(ue,ue+5))return ue+=5,!1;if('null'==_e.slice(ue,ue+4))return ue+=4,null;ye();}return'$'},ge=function(_e){var ke,Ce;if('$'==_e&&ye(),'string'==typeof _e){if('@'==(te?_e.charAt(0):_e[0]))return _e.slice(1);if('['==_e){for(ke=[];;Ce||(Ce=!0)){if(_e=fe(),']'==_e)break;Ce&&(','==_e?(_e=fe(),']'==_e&&ye()):ye()),','==_e&&ye(),ke.push(ge(_e))}return ke}if('{'==_e){for(ke={};;Ce||(Ce=!0)){if(_e=fe(),'}'==_e)break;Ce&&(','==_e?(_e=fe(),'}'==_e&&ye()):ye()),(','==_e||'string'!=typeof _e||'@'!=(te?_e.charAt(0):_e[0])||':'!=fe())&&ye(),ke[_e.slice(1)]=ge(fe())}return ke}ye()}return _e},me=function(_e,ke,Ce){var Ee=be(_e,ke,Ce);Ee===X?delete _e[ke]:_e[ke]=Ee},be=function(_e,ke,Ce){var Ee=_e[ke],Ae;if('object'==typeof Ee&&Ee)if(Y.call(Ee)==ee)for(Ae=Ee.length;Ae--;)me(Ee,Ae,Ce);else W(Ee,function(we){me(Ee,we,Ce)});return Ce.call(_e,ke,Ee)},ue,he;N.parse=function(_e,ke){var Ce,Ee;return ue=0,he=''+_e,Ce=ge(fe()),'$'!=fe()&&ye(),ue=he=null,ke&&Y.call(ke)==G?be((Ee={},Ee['']=Ce,Ee),'',ke):Ce}}}return N.runInContext=C,N}var E='function'==typeof k,A={'function':!0,object:!0},w=A[typeof u]&&u&&!u.nodeType&&u,S=A[typeof window]&&window||this,T=w&&A[typeof g]&&g&&!g.nodeType&&'object'==typeof _&&_;if(T&&(T.global===T||T.window===T||T.self===T)&&(S=T),w&&!E)C(S,w);else{var R=S.JSON,P=S.JSON3,D=!1,O=C(S,S.JSON3={noConflict:function(){return D||(D=!0,S.JSON=R,S.JSON3=P,R=P=null),O}});S.JSON={parse:O.parse,stringify:O.stringify}}}).call(this)}).call(u,f(8)(t),function(){return this}())},function(t,u){t.exports=function(f){return f.webpackPolyfill||(f.deprecate=function(){},f.paths=[],f.children=[],f.webpackPolyfill=1),f}},function(t,u){t.exports=Array.isArray||function(f){return'[object Array]'==Object.prototype.toString.call(f)}},function(t,u){function f(_){if(_)return g(_)}function g(_){for(var k in f.prototype)_[k]=f.prototype[k];return _}t.exports=f;;f.prototype.on=f.prototype.addEventListener=function(_,k){return this._callbacks=this._callbacks||{},(this._callbacks[_]=this._callbacks[_]||[]).push(k),this},f.prototype.once=function(_,k){function C(){E.off(_,C),k.apply(this,arguments)}var E=this;return this._callbacks=this._callbacks||{},C.fn=k,this.on(_,C),this},f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(_,k){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var C=this._callbacks[_];if(!C)return this;if(1==arguments.length)return delete this._callbacks[_],this;var E;for(var A=0;A<C.length;A++)if(E=C[A],E===k||E.fn===k){C.splice(A,1);break}return this},f.prototype.emit=function(_){this._callbacks=this._callbacks||{};var k=[].slice.call(arguments,1),C=this._callbacks[_];if(C){C=C.slice(0);for(var E=0,A=C.length;E<A;++E)C[E].apply(this,k)}return this},f.prototype.listeners=function(_){return this._callbacks=this._callbacks||{},this._callbacks[_]||[]},f.prototype.hasListeners=function(_){return!!this.listeners(_).length}},function(t,u,f){(function(g){var _=f(9),k=f(12);u.deconstructPacket=function(C){function E(T){if(!T)return T;if(k(T)){var R={_placeholder:!0,num:A.length};return A.push(T),R}if(_(T)){var P=Array(T.length);for(var D=0;D<T.length;D++)P[D]=E(T[D]);return P}if('object'==typeof T&&!(T instanceof Date)){var P={};for(var O in T)P[O]=E(T[O]);return P}return T}var A=[],w=C.data,S=C;return S.data=E(w),S.attachments=A.length,{packet:S,buffers:A}},u.reconstructPacket=function(C,E){function A(w){if(w&&w._placeholder){var S=E[w.num];return S}if(_(w)){for(var T=0;T<w.length;T++)w[T]=A(w[T]);return w}if(w&&'object'==typeof w){for(var R in w)w[R]=A(w[R]);return w}return w}return C.data=A(C.data),C.attachments=void 0,C},u.removeBlobs=function(C,E){function A(T,R,P){if(!T)return T;if(g.Blob&&T instanceof Blob||g.File&&T instanceof File){w++;var D=new FileReader;D.onload=function(){P?P[R]=this.result:S=this.result,--w||E(S)},D.readAsArrayBuffer(T)}else if(_(T))for(var O=0;O<T.length;O++)A(T[O],O,T);else if(T&&'object'==typeof T&&!k(T))for(var B in T)A(T[B],B,T)}var w=0,S=C;A(S),w||E(S)}}).call(u,function(){return this}())},function(t,u){(function(f){t.exports=function(_){return f.Buffer&&f.Buffer.isBuffer(_)||f.ArrayBuffer&&_ instanceof ArrayBuffer}}).call(u,function(){return this}())},function(t,u,f){'use strict';function g(O,B){return this instanceof g?void(O&&'object'===('undefined'==typeof O?'undefined':_(O))&&(B=O,O=void 0),B=B||{},B.path=B.path||'/socket.io',this.nsps={},this.subs=[],this.opts=B,this.reconnection(!1!==B.reconnection),this.reconnectionAttempts(B.reconnectionAttempts||1/0),this.reconnectionDelay(B.reconnectionDelay||1000),this.reconnectionDelayMax(B.reconnectionDelayMax||5000),this.randomizationFactor(B.randomizationFactor||0.5),this.backoff=new P({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==B.timeout?20000:B.timeout),this.readyState='closed',this.uri=O,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new A.Encoder,this.decoder=new A.Decoder,this.autoConnect=!1!==B.autoConnect,this.autoConnect&&this.open()):new g(O,B)}var _='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&'function'==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?'symbol':typeof O},k=f(14),C=f(40),E=f(41),A=f(6),w=f(43),S=f(44),T=f(3)('socket.io-client:manager'),R=f(38),P=f(46),D=Object.prototype.hasOwnProperty;t.exports=g,g.prototype.emitAll=function(){for(var O in this.emit.apply(this,arguments),this.nsps)D.call(this.nsps,O)&&this.nsps[O].emit.apply(this.nsps[O],arguments)},g.prototype.updateSocketIds=function(){for(var O in this.nsps)D.call(this.nsps,O)&&(this.nsps[O].id=this.engine.id)},E(g.prototype),g.prototype.reconnection=function(O){return arguments.length?(this._reconnection=!!O,this):this._reconnection},g.prototype.reconnectionAttempts=function(O){return arguments.length?(this._reconnectionAttempts=O,this):this._reconnectionAttempts},g.prototype.reconnectionDelay=function(O){return arguments.length?(this._reconnectionDelay=O,this.backoff&&this.backoff.setMin(O),this):this._reconnectionDelay},g.prototype.randomizationFactor=function(O){return arguments.length?(this._randomizationFactor=O,this.backoff&&this.backoff.setJitter(O),this):this._randomizationFactor},g.prototype.reconnectionDelayMax=function(O){return arguments.length?(this._reconnectionDelayMax=O,this.backoff&&this.backoff.setMax(O),this):this._reconnectionDelayMax},g.prototype.timeout=function(O){return arguments.length?(this._timeout=O,this):this._timeout},g.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},g.prototype.open=g.prototype.connect=function(O,B){if(T('readyState %s',this.readyState),~this.readyState.indexOf('open'))return this;T('opening %s',this.uri),this.engine=k(this.uri,this.opts);var N=this.engine,I=this;this.readyState='opening',this.skipReconnect=!1;var L=w(N,'open',function(){I.onopen(),O&&O()}),U=w(N,'error',function(F){if(T('connect_error'),I.cleanup(),I.readyState='closed',I.emitAll('connect_error',F),O){var H=new Error('Connection error');H.data=F,O(H)}else I.maybeReconnectOnOpen()});if(!1!==this._timeout){var q=this._timeout;T('connect attempt will timeout after %d',q);var M=setTimeout(function(){T('connect attempt timed out after %d',q),L.destroy(),N.close(),N.emit('error','timeout'),I.emitAll('connect_timeout',q)},q);this.subs.push({destroy:function(){clearTimeout(M)}})}return this.subs.push(L),this.subs.push(U),this},g.prototype.onopen=function(){T('open'),this.cleanup(),this.readyState='open',this.emit('open');var O=this.engine;this.subs.push(w(O,'data',S(this,'ondata'))),this.subs.push(w(O,'ping',S(this,'onping'))),this.subs.push(w(O,'pong',S(this,'onpong'))),this.subs.push(w(O,'error',S(this,'onerror'))),this.subs.push(w(O,'close',S(this,'onclose'))),this.subs.push(w(this.decoder,'decoded',S(this,'ondecoded')))},g.prototype.onping=function(){this.lastPing=new Date,this.emitAll('ping')},g.prototype.onpong=function(){this.emitAll('pong',new Date-this.lastPing)},g.prototype.ondata=function(O){this.decoder.add(O)},g.prototype.ondecoded=function(O){this.emit('packet',O)},g.prototype.onerror=function(O){T('error',O),this.emitAll('error',O)},g.prototype.socket=function(O,B){function N(){~R(L.connecting,I)||L.connecting.push(I)}var I=this.nsps[O];if(!I){I=new C(this,O,B),this.nsps[O]=I;var L=this;I.on('connecting',N),I.on('connect',function(){I.id=L.engine.id}),this.autoConnect&&N()}return I},g.prototype.destroy=function(O){var B=R(this.connecting,O);~B&&this.connecting.splice(B,1),this.connecting.length||this.close()},g.prototype.packet=function(O){T('writing packet %j',O);var B=this;O.query&&0===O.type&&(O.nsp+='?'+O.query),B.encoding?B.packetBuffer.push(O):(B.encoding=!0,this.encoder.encode(O,function(N){for(var I=0;I<N.length;I++)B.engine.write(N[I],O.options);B.encoding=!1,B.processPacketQueue()}))},g.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var O=this.packetBuffer.shift();this.packet(O)}},g.prototype.cleanup=function(){T('cleanup');var O=this.subs.length;for(var B=0;B<O;B++){var N=this.subs.shift();N.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},g.prototype.close=g.prototype.disconnect=function(){T('disconnect'),this.skipReconnect=!0,this.reconnecting=!1,'opening'===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState='closed',this.engine&&this.engine.close()},g.prototype.onclose=function(O){T('onclose'),this.cleanup(),this.backoff.reset(),this.readyState='closed',this.emit('close',O),this._reconnection&&!this.skipReconnect&&this.reconnect()},g.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var O=this;if(this.backoff.attempts>=this._reconnectionAttempts)T('reconnect failed'),this.backoff.reset(),this.emitAll('reconnect_failed'),this.reconnecting=!1;else{var B=this.backoff.duration();T('will wait %dms before reconnect attempt',B),this.reconnecting=!0;var N=setTimeout(function(){O.skipReconnect||(T('attempting reconnect'),O.emitAll('reconnect_attempt',O.backoff.attempts),O.emitAll('reconnecting',O.backoff.attempts),!O.skipReconnect&&O.open(function(U){U?(T('reconnect attempt error'),O.reconnecting=!1,O.reconnect(),O.emitAll('reconnect_error',U.data)):(T('reconnect success'),O.onreconnect())}))},B);this.subs.push({destroy:function(){clearTimeout(N)}})}},g.prototype.onreconnect=function(){var O=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll('reconnect',O)}},function(t,u,f){t.exports=f(15)},function(t,u,f){t.exports=f(16),t.exports.parser=f(23)},function(t,u,f){(function(g){function _(D,O){if(!(this instanceof _))return new _(D,O);O=O||{},D&&'object'==typeof D&&(O=D,D=null),D?(D=T(D),O.hostname=D.host,O.secure='https'===D.protocol||'wss'===D.protocol,O.port=D.port,D.query&&(O.query=D.query)):O.host&&(O.hostname=T(O.host).host),this.secure=null==O.secure?g.location&&'https:'===location.protocol:O.secure,O.hostname&&!O.port&&(O.port=this.secure?'443':'80'),this.agent=O.agent||!1,this.hostname=O.hostname||(g.location?location.hostname:'localhost'),this.port=O.port||(g.location&&location.port?location.port:this.secure?443:80),this.query=O.query||{},'string'==typeof this.query&&(this.query=P.decode(this.query)),this.upgrade=!1!==O.upgrade,this.path=(O.path||'/engine.io').replace(/\/$/,'')+'/',this.forceJSONP=!!O.forceJSONP,this.jsonp=!1!==O.jsonp,this.forceBase64=!!O.forceBase64,this.enablesXDR=!!O.enablesXDR,this.timestampParam=O.timestampParam||'t',this.timestampRequests=O.timestampRequests,this.transports=O.transports||['polling','websocket'],this.readyState='',this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=O.policyPort||843,this.rememberUpgrade=O.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=O.onlyBinaryUpgrades,this.perMessageDeflate=!1!==O.perMessageDeflate&&(O.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=O.pfx||null,this.key=O.key||null,this.passphrase=O.passphrase||null,this.cert=O.cert||null,this.ca=O.ca||null,this.ciphers=O.ciphers||null,this.rejectUnauthorized=O.rejectUnauthorized===void 0?null:O.rejectUnauthorized;var B='object'==typeof g&&g;B.global===B&&O.extraHeaders&&0<Object.keys(O.extraHeaders).length&&(this.extraHeaders=O.extraHeaders),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function k(D){var O={};for(var B in D)D.hasOwnProperty(B)&&(O[B]=D[B]);return O}var C=f(17),E=f(31),A=f(3)('engine.io-client:socket'),w=f(38),S=f(23),T=f(2),R=f(39),P=f(32);t.exports=_,_.priorWebsocketSuccess=!1,E(_.prototype),_.protocol=S.protocol,_.Socket=_,_.Transport=f(22),_.transports=f(17),_.parser=f(23),_.prototype.createTransport=function(D){A('creating transport "%s"',D);var O=k(this.query);O.EIO=S.protocol,O.transport=D,this.id&&(O.sid=this.id);var B=new C[D]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:O,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return B},_.prototype.open=function(){var D;if(this.rememberUpgrade&&_.priorWebsocketSuccess&&-1!==this.transports.indexOf('websocket'))D='websocket';else{if(0===this.transports.length){var O=this;return void setTimeout(function(){O.emit('error','No transports available')},0)}D=this.transports[0]}this.readyState='opening';try{D=this.createTransport(D)}catch(B){return this.transports.shift(),void this.open()}D.open(),this.setTransport(D)},_.prototype.setTransport=function(D){A('setting transport %s',D.name);var O=this;this.transport&&(A('clearing existing transport %s',this.transport.name),this.transport.removeAllListeners()),this.transport=D,D.on('drain',function(){O.onDrain()}).on('packet',function(B){O.onPacket(B)}).on('error',function(B){O.onError(B)}).on('close',function(){O.onClose('transport close')})},_.prototype.probe=function(D){function O(){if(H.onlyBinaryUpgrades){var z=!this.supportsBinary&&H.transport.supportsBinary;F=F||z}F||(A('probe transport "%s" opened',D),M.send([{type:'ping',data:'probe'}]),M.once('packet',function(Y){if(!F)if('pong'===Y.type&&'probe'===Y.data){if(A('probe transport "%s" pong',D),H.upgrading=!0,H.emit('upgrading',M),!M)return;_.priorWebsocketSuccess='websocket'===M.name,A('pausing current transport "%s"',H.transport.name),H.transport.pause(function(){F||'closed'===H.readyState||(A('changing transport and sending upgrade packet'),q(),H.setTransport(M),M.send([{type:'upgrade'}]),H.emit('upgrade',M),M=null,H.upgrading=!1,H.flush())})}else{A('probe transport "%s" failed',D);var Q=new Error('probe error');Q.transport=M.name,H.emit('upgradeError',Q)}}))}function B(){F||(F=!0,q(),M.close(),M=null)}function N(z){var J=new Error('probe error: '+z);J.transport=M.name,B(),A('probe transport "%s" failed because of error: %s',D,z),H.emit('upgradeError',J)}function I(){N('transport closed')}function L(){N('socket closed')}function U(z){M&&z.name!==M.name&&(A('"%s" works - aborting "%s"',z.name,M.name),B())}function q(){M.removeListener('open',O),M.removeListener('error',N),M.removeListener('close',I),H.removeListener('close',L),H.removeListener('upgrading',U)}A('probing transport "%s"',D);var M=this.createTransport(D,{probe:1}),F=!1,H=this;_.priorWebsocketSuccess=!1,M.once('open',O),M.once('error',N),M.once('close',I),this.once('close',L),this.once('upgrading',U),M.open()},_.prototype.onOpen=function(){if(A('socket open'),this.readyState='open',_.priorWebsocketSuccess='websocket'===this.transport.name,this.emit('open'),this.flush(),'open'===this.readyState&&this.upgrade&&this.transport.pause){A('starting upgrade probes');for(var D=0,O=this.upgrades.length;D<O;D++)this.probe(this.upgrades[D])}},_.prototype.onPacket=function(D){if('opening'===this.readyState||'open'===this.readyState)switch(A('socket receive: type "%s", data "%s"',D.type,D.data),this.emit('packet',D),this.emit('heartbeat'),D.type){case'open':this.onHandshake(R(D.data));break;case'pong':this.setPing(),this.emit('pong');break;case'error':var O=new Error('server error');O.code=D.data,this.onError(O);break;case'message':this.emit('data',D.data),this.emit('message',D.data);}else A('packet received with socket readyState "%s"',this.readyState)},_.prototype.onHandshake=function(D){this.emit('handshake',D),this.id=D.sid,this.transport.query.sid=D.sid,this.upgrades=this.filterUpgrades(D.upgrades),this.pingInterval=D.pingInterval,this.pingTimeout=D.pingTimeout,this.onOpen(),'closed'===this.readyState||(this.setPing(),this.removeListener('heartbeat',this.onHeartbeat),this.on('heartbeat',this.onHeartbeat))},_.prototype.onHeartbeat=function(D){clearTimeout(this.pingTimeoutTimer);var O=this;O.pingTimeoutTimer=setTimeout(function(){'closed'===O.readyState||O.onClose('ping timeout')},D||O.pingInterval+O.pingTimeout)},_.prototype.setPing=function(){var D=this;clearTimeout(D.pingIntervalTimer),D.pingIntervalTimer=setTimeout(function(){A('writing ping packet - expecting pong within %sms',D.pingTimeout),D.ping(),D.onHeartbeat(D.pingTimeout)},D.pingInterval)},_.prototype.ping=function(){var D=this;this.sendPacket('ping',function(){D.emit('ping')})},_.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit('drain'):this.flush()},_.prototype.flush=function(){'closed'!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(A('flushing %d packets in socket',this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit('flush'))},_.prototype.write=_.prototype.send=function(D,O,B){return this.sendPacket('message',D,O,B),this},_.prototype.sendPacket=function(D,O,B,N){if('function'==typeof O&&(N=O,O=void 0),'function'==typeof B&&(N=B,B=null),'closing'!==this.readyState&&'closed'!==this.readyState){B=B||{},B.compress=!1!==B.compress;var I={type:D,data:O,options:B};this.emit('packetCreate',I),this.writeBuffer.push(I),N&&this.once('flush',N),this.flush()}},_.prototype.close=function(){function D(){N.onClose('forced close'),A('socket closing - telling transport to close'),N.transport.close()}function O(){N.removeListener('upgrade',O),N.removeListener('upgradeError',O),D()}function B(){N.once('upgrade',O),N.once('upgradeError',O)}if('opening'===this.readyState||'open'===this.readyState){this.readyState='closing';var N=this;this.writeBuffer.length?this.once('drain',function(){this.upgrading?B():D()}):this.upgrading?B():D()}return this},_.prototype.onError=function(D){A('socket error %j',D),_.priorWebsocketSuccess=!1,this.emit('error',D),this.onClose('transport error',D)},_.prototype.onClose=function(D,O){if('opening'===this.readyState||'open'===this.readyState||'closing'===this.readyState){A('socket close with reason: "%s"',D);var B=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners('close'),this.transport.close(),this.transport.removeAllListeners(),this.readyState='closed',this.id=null,this.emit('close',D,O),B.writeBuffer=[],B.prevBufferLen=0}},_.prototype.filterUpgrades=function(D){var O=[];for(var B=0,N=D.length;B<N;B++)~w(this.transports,D[B])&&O.push(D[B]);return O}}).call(u,function(){return this}())},function(t,u,f){(function(g){var _=f(18),k=f(20),C=f(35),E=f(36);u.polling=function(w){var T=!1,R=!1,P=!1!==w.jsonp,S;if(g.location){var D='https:'===location.protocol,O=location.port;O||(O=D?443:80),T=w.hostname!==location.hostname||O!==w.port,R=w.secure!==D}if(w.xdomain=T,w.xscheme=R,S=new _(w),'open'in S&&!w.forceJSONP)return new k(w);if(!P)throw new Error('JSONP disabled');return new C(w)},u.websocket=E}).call(u,function(){return this}())},function(t,u,f){var g=f(19);t.exports=function(_){var k=_.xdomain,C=_.xscheme,E=_.enablesXDR;try{if('undefined'!=typeof XMLHttpRequest&&(!k||g))return new XMLHttpRequest}catch(A){}try{if('undefined'!=typeof XDomainRequest&&!C&&E)return new XDomainRequest}catch(A){}if(!k)try{return new ActiveXObject('Microsoft.XMLHTTP')}catch(A){}}},function(t,u){try{t.exports='undefined'!=typeof XMLHttpRequest&&'withCredentials'in new XMLHttpRequest}catch(f){t.exports=!1}},function(t,u,f){(function(g){function _(){}function k(P){if(w.call(this,P),g.location){var D='https:'===location.protocol,O=location.port;O||(O=D?443:80),this.xd=P.hostname!==g.location.hostname||O!==P.port,this.xs=P.secure!==D}else this.extraHeaders=P.extraHeaders}function C(P){this.method=P.method||'GET',this.uri=P.uri,this.xd=!!P.xd,this.xs=!!P.xs,this.async=!1!==P.async,this.data=void 0===P.data?null:P.data,this.agent=P.agent,this.isBinary=P.isBinary,this.supportsBinary=P.supportsBinary,this.enablesXDR=P.enablesXDR,this.pfx=P.pfx,this.key=P.key,this.passphrase=P.passphrase,this.cert=P.cert,this.ca=P.ca,this.ciphers=P.ciphers,this.rejectUnauthorized=P.rejectUnauthorized,this.extraHeaders=P.extraHeaders,this.create()}function E(){for(var P in C.requests)C.requests.hasOwnProperty(P)&&C.requests[P].abort()}var A=f(18),w=f(21),S=f(31),T=f(33),R=f(3)('engine.io-client:polling-xhr');t.exports=k,t.exports.Request=C,T(k,w),k.prototype.supportsBinary=!0,k.prototype.request=function(P){return P=P||{},P.uri=this.uri(),P.xd=this.xd,P.xs=this.xs,P.agent=this.agent||!1,P.supportsBinary=this.supportsBinary,P.enablesXDR=this.enablesXDR,P.pfx=this.pfx,P.key=this.key,P.passphrase=this.passphrase,P.cert=this.cert,P.ca=this.ca,P.ciphers=this.ciphers,P.rejectUnauthorized=this.rejectUnauthorized,P.extraHeaders=this.extraHeaders,new C(P)},k.prototype.doWrite=function(P,D){var O='string'!=typeof P&&P!==void 0,B=this.request({method:'POST',data:P,isBinary:O}),N=this;B.on('success',D),B.on('error',function(I){N.onError('xhr post error',I)}),this.sendXhr=B},k.prototype.doPoll=function(){R('xhr poll');var P=this.request(),D=this;P.on('data',function(O){D.onData(O)}),P.on('error',function(O){D.onError('xhr poll error',O)}),this.pollXhr=P},S(C.prototype),C.prototype.create=function(){var P={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};P.pfx=this.pfx,P.key=this.key,P.passphrase=this.passphrase,P.cert=this.cert,P.ca=this.ca,P.ciphers=this.ciphers,P.rejectUnauthorized=this.rejectUnauthorized;var D=this.xhr=new A(P),O=this;try{R('xhr open %s: %s',this.method,this.uri),D.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var B in D.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(B)&&D.setRequestHeader(B,this.extraHeaders[B])}catch(N){}if(this.supportsBinary&&(D.responseType='arraybuffer'),'POST'===this.method)try{this.isBinary?D.setRequestHeader('Content-type','application/octet-stream'):D.setRequestHeader('Content-type','text/plain;charset=UTF-8')}catch(N){}'withCredentials'in D&&(D.withCredentials=!0),this.hasXDR()?(D.onload=function(){O.onLoad()},D.onerror=function(){O.onError(D.responseText)}):D.onreadystatechange=function(){4===D.readyState&&(200===D.status||1223===D.status?O.onLoad():setTimeout(function(){O.onError(D.status)},0))},R('xhr data %s',this.data),D.send(this.data)}catch(N){return void setTimeout(function(){O.onError(N)},0)}g.document&&(this.index=C.requestsCount++,C.requests[this.index]=this)},C.prototype.onSuccess=function(){this.emit('success'),this.cleanup()},C.prototype.onData=function(P){this.emit('data',P),this.onSuccess()},C.prototype.onError=function(P){this.emit('error',P),this.cleanup(!0)},C.prototype.cleanup=function(P){if('undefined'!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=_:this.xhr.onreadystatechange=_,P)try{this.xhr.abort()}catch(D){}g.document&&delete C.requests[this.index],this.xhr=null}},C.prototype.onLoad=function(){var P;try{var D;try{D=this.xhr.getResponseHeader('Content-Type').split(';')[0]}catch(L){}if('application/octet-stream'===D)P=this.xhr.response||this.xhr.responseText;else if(!this.supportsBinary)P=this.xhr.responseText;else try{P=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(L){var O=new Uint8Array(this.xhr.response),B=[];for(var N=0,I=O.length;N<I;N++)B.push(O[N]);P=String.fromCharCode.apply(null,B)}}catch(L){this.onError(L)}null!=P&&this.onData(P)},C.prototype.hasXDR=function(){return'undefined'!=typeof g.XDomainRequest&&!this.xs&&this.enablesXDR},C.prototype.abort=function(){this.cleanup()},C.requestsCount=0,C.requests={},g.document&&(g.attachEvent?g.attachEvent('onunload',E):g.addEventListener&&g.addEventListener('beforeunload',E,!1))}).call(u,function(){return this}())},function(t,u,f){function g(T){var R=T&&T.forceBase64;(!S||R)&&(this.supportsBinary=!1),_.call(this,T)}var _=f(22),k=f(32),C=f(23),E=f(33),A=f(34),w=f(3)('engine.io-client:polling');t.exports=g;var S=function(){var T=f(18),R=new T({xdomain:!1});return null!=R.responseType}();E(g,_),g.prototype.name='polling',g.prototype.doOpen=function(){this.poll()},g.prototype.pause=function(T){function R(){w('paused'),P.readyState='paused',T()}var P=this;if(this.readyState='pausing',this.polling||!this.writable){var D=0;this.polling&&(w('we are currently polling - waiting to pause'),D++,this.once('pollComplete',function(){w('pre-pause polling complete'),--D||R()})),this.writable||(w('we are currently writing - waiting to pause'),D++,this.once('drain',function(){w('pre-pause writing complete'),--D||R()}))}else R()},g.prototype.poll=function(){w('polling'),this.polling=!0,this.doPoll(),this.emit('poll')},g.prototype.onData=function(T){var R=this;w('polling got data %s',T),C.decodePayload(T,this.socket.binaryType,function(P,D,O){return'opening'===R.readyState&&R.onOpen(),'close'===P.type?(R.onClose(),!1):void R.onPacket(P)}),'closed'!==this.readyState&&(this.polling=!1,this.emit('pollComplete'),'open'===this.readyState?this.poll():w('ignoring poll - transport state "%s"',this.readyState))},g.prototype.doClose=function(){function T(){w('writing close packet'),R.write([{type:'close'}])}var R=this;'open'===this.readyState?(w('transport open - closing'),T()):(w('transport not open - deferring close'),this.once('open',T))},g.prototype.write=function(T){var R=this;this.writable=!1;var P=function(){R.writable=!0,R.emit('drain')};C.encodePayload(T,this.supportsBinary,function(D){R.doWrite(D,P)})},g.prototype.uri=function(){var T=this.query||{},R=this.secure?'https':'http',P='';!1!==this.timestampRequests&&(T[this.timestampParam]=A()),this.supportsBinary||T.sid||(T.b64=1),T=k.encode(T),this.port&&('https'==R&&443!==this.port||'http'==R&&80!==this.port)&&(P=':'+this.port),T.length&&(T='?'+T);var D=-1!==this.hostname.indexOf(':');return R+'://'+(D?'['+this.hostname+']':this.hostname)+P+this.path+T}},function(t,u,f){function g(C){this.path=C.path,this.hostname=C.hostname,this.port=C.port,this.secure=C.secure,this.query=C.query,this.timestampParam=C.timestampParam,this.timestampRequests=C.timestampRequests,this.readyState='',this.agent=C.agent||!1,this.socket=C.socket,this.enablesXDR=C.enablesXDR,this.pfx=C.pfx,this.key=C.key,this.passphrase=C.passphrase,this.cert=C.cert,this.ca=C.ca,this.ciphers=C.ciphers,this.rejectUnauthorized=C.rejectUnauthorized,this.extraHeaders=C.extraHeaders}var _=f(23),k=f(31);t.exports=g,k(g.prototype),g.prototype.onError=function(C,E){var A=new Error(C);return A.type='TransportError',A.description=E,this.emit('error',A),this},g.prototype.open=function(){return('closed'===this.readyState||''===this.readyState)&&(this.readyState='opening',this.doOpen()),this},g.prototype.close=function(){return('opening'===this.readyState||'open'===this.readyState)&&(this.doClose(),this.onClose()),this},g.prototype.send=function(C){if('open'===this.readyState)this.write(C);else throw new Error('Transport not open')},g.prototype.onOpen=function(){this.readyState='open',this.writable=!0,this.emit('open')},g.prototype.onData=function(C){var E=_.decodePacket(C,this.socket.binaryType);this.onPacket(E)},g.prototype.onPacket=function(C){this.emit('packet',C)},g.prototype.onClose=function(){this.readyState='closed',this.emit('close')}},function(t,u,f){(function(g){function _(F,H){var z='b'+u.packets[F.type]+F.data.data;return H(z)}function k(F,H,z){if(!H)return u.encodeBase64Packet(F,z);var J=F.data,V=new Uint8Array(J),Y=new Uint8Array(1+J.byteLength);Y[0]=L[F.type];for(var Q=0;Q<V.length;Q++)Y[Q+1]=V[Q];return z(Y.buffer)}function C(F,H,z){if(!H)return u.encodeBase64Packet(F,z);var J=new FileReader;return J.onload=function(){F.data=J.result,u.encodePacket(F,H,!0,z)},J.readAsArrayBuffer(F.data)}function E(F,H,z){if(!H)return u.encodeBase64Packet(F,z);if(I)return C(F,H,z);var J=new Uint8Array(1);J[0]=L[F.type];var V=new M([J.buffer,F.data]);return z(V)}function A(F){try{F=D.decode(F)}catch(H){return!1}return F}function w(F,H,z){var J=Array(F.length),V=P(F.length,z),Y=function(W,X,K){H(X,function(G,$){J[W]=$,K(G,J)})};for(var Q=0;Q<F.length;Q++)Y(Q,F[Q],V)}var S=f(24),T=f(25),R=f(26),P=f(27),D=f(28),O;g&&g.ArrayBuffer&&(O=f(29));var B='undefined'!=typeof navigator&&/Android/i.test(navigator.userAgent),N='undefined'!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),I=B||N;u.protocol=3;var L=u.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},U=S(L),q={type:'error',data:'parser error'},M=f(30);u.encodePacket=function(F,H,z,J){'function'==typeof H&&(J=H,H=!1),'function'==typeof z&&(J=z,z=null);var V=void 0===F.data?void 0:F.data.buffer||F.data;if(g.ArrayBuffer&&V instanceof ArrayBuffer)return k(F,H,J);if(M&&V instanceof g.Blob)return E(F,H,J);if(V&&V.base64)return _(F,J);var Y=L[F.type];return void 0!==F.data&&(Y+=z?D.encode(F.data+''):F.data+''),J(''+Y)},u.encodeBase64Packet=function(F,H){var z='b'+u.packets[F.type];if(M&&F.data instanceof g.Blob){var J=new FileReader;return J.onload=function(){var X=J.result.split(',')[1];H(z+X)},J.readAsDataURL(F.data)}var V;try{V=String.fromCharCode.apply(null,new Uint8Array(F.data))}catch(X){var Y=new Uint8Array(F.data),Q=Array(Y.length);for(var W=0;W<Y.length;W++)Q[W]=Y[W];V=String.fromCharCode.apply(null,Q)}return z+=g.btoa(V),H(z)},u.decodePacket=function(F,H,z){if(void 0===F)return q;if('string'==typeof F){if('b'==F.charAt(0))return u.decodeBase64Packet(F.substr(1),H);if(z&&(F=A(F),!1===F))return q;var J=F.charAt(0);return+J==J&&U[J]?1<F.length?{type:U[J],data:F.substring(1)}:{type:U[J]}:q}var V=new Uint8Array(F),J=V[0],Y=R(F,1);return M&&'blob'===H&&(Y=new M([Y])),{type:U[J],data:Y}},u.decodeBase64Packet=function(F,H){var z=U[F.charAt(0)];if(!O)return{type:z,data:{base64:!0,data:F.substr(1)}};var J=O.decode(F.substr(1));return'blob'===H&&M&&(J=new M([J])),{type:z,data:J}},u.encodePayload=function(F,H,z){function J(Y){return Y.length+':'+Y}'function'==typeof H&&(z=H,H=null);var V=T(F);return H&&V?M&&!I?u.encodePayloadAsBlob(F,z):u.encodePayloadAsArrayBuffer(F,z):F.length?void w(F,function(Q,W){u.encodePacket(Q,!!V&&H,!0,function(X){W(null,J(X))})},function(Y,Q){return z(Q.join(''))}):z('0:')},u.decodePayload=function(F,H,z){if('string'!=typeof F)return u.decodePayloadAsBinary(F,H,z);'function'==typeof H&&(z=H,H=null);var J;if(''==F)return z(q,0,1);var V='',Y,Q;for(var W=0,X=F.length;W<X;W++){var K=F.charAt(W);if(':'!=K)V+=K;else{if(''==V||V!=(Y=+V))return z(q,0,1);if(Q=F.substr(W+1,Y),V!=Q.length)return z(q,0,1);if(Q.length){if(J=u.decodePacket(Q,H,!0),q.type==J.type&&q.data==J.data)return z(q,0,1);var G=z(J,W+Y,X);if(!1===G)return}W+=Y,V=''}}if(''!=V)return z(q,0,1)},u.encodePayloadAsArrayBuffer=function(F,H){return F.length?void w(F,function(J,V){u.encodePacket(J,!0,!0,function(Y){return V(null,Y)})},function(z,J){var V=J.reduce(function(W,X){var K;return K='string'==typeof X?X.length:X.byteLength,W+K.toString().length+K+2},0),Y=new Uint8Array(V),Q=0;return J.forEach(function(W){var X='string'==typeof W,K=W;if(X){var G=new Uint8Array(W.length);for(var $=0;$<W.length;$++)G[$]=W.charCodeAt($);K=G.buffer}Y[Q++]=X?0:1;var Z=K.byteLength.toString();for(var $=0;$<Z.length;$++)Y[Q++]=parseInt(Z[$]);Y[Q++]=255;var G=new Uint8Array(K);for(var $=0;$<G.length;$++)Y[Q++]=G[$]}),H(Y.buffer)}):H(new ArrayBuffer(0))},u.encodePayloadAsBlob=function(F,H){w(F,function(J,V){u.encodePacket(J,!0,!0,function(Y){var Q=new Uint8Array(1);if(Q[0]=1,'string'==typeof Y){var W=new Uint8Array(Y.length);for(var X=0;X<Y.length;X++)W[X]=Y.charCodeAt(X);Y=W.buffer,Q[0]=0}var K=Y instanceof ArrayBuffer?Y.byteLength:Y.size,G=K.toString(),$=new Uint8Array(G.length+1);for(var X=0;X<G.length;X++)$[X]=parseInt(G[X]);if($[G.length]=255,M){var Z=new M([Q.buffer,$.buffer,Y]);V(null,Z)}})},function(z,J){return H(new M(J))})},u.decodePayloadAsBinary=function(F,H,z){'function'==typeof H&&(z=H,H=null);for(var J=F,V=[],Y=!1;0<J.byteLength;){var Q=new Uint8Array(J),W=0===Q[0],X='';for(var K=1;;K++){if(255==Q[K])break;if(310<X.length){Y=!0;break}X+=Q[K]}if(Y)return z(q,0,1);J=R(J,2+X.length),X=parseInt(X);var G=R(J,0,X);if(W)try{G=String.fromCharCode.apply(null,new Uint8Array(G))}catch(ee){var $=new Uint8Array(G);G='';for(var K=0;K<$.length;K++)G+=String.fromCharCode($[K])}V.push(G),J=R(J,X)}var Z=V.length;V.forEach(function(ee,te){z(u.decodePacket(ee,H,!0),te,Z)})}}).call(u,function(){return this}())},function(t,u){t.exports=Object.keys||function(g){var _=[],k=Object.prototype.hasOwnProperty;for(var C in g)k.call(g,C)&&_.push(C);return _}},function(t,u,f){(function(g){var _=f(9);t.exports=function(C){function E(A){if(!A)return!1;if(g.Buffer&&g.Buffer.isBuffer(A)||g.ArrayBuffer&&A instanceof ArrayBuffer||g.Blob&&A instanceof Blob||g.File&&A instanceof File)return!0;if(_(A)){for(var w=0;w<A.length;w++)if(E(A[w]))return!0;}else if(A&&'object'==typeof A)for(var S in A.toJSON&&(A=A.toJSON()),A)if(Object.prototype.hasOwnProperty.call(A,S)&&E(A[S]))return!0;return!1}return E(C)}}).call(u,function(){return this}())},function(t,u){t.exports=function(f,g,_){var k=f.byteLength;if(g=g||0,_=_||k,f.slice)return f.slice(g,_);if(0>g&&(g+=k),0>_&&(_+=k),_>k&&(_=k),g>=k||g>=_||0===k)return new ArrayBuffer(0);var C=new Uint8Array(f),E=new Uint8Array(_-g);for(var A=g,w=0;A<_;A++,w++)E[w]=C[A];return E.buffer}},function(t,u){function f(){}t.exports=function(_,k,C){function E(w,S){if(0>=E.count)throw new Error('after called too many times');--E.count,w?(A=!0,k(w),k=C):0===E.count&&!A&&k(null,S)}var A=!1;return C=C||f,E.count=_,0===_?k():E}},function(t,u,f){var g;(function(_,k){;(function(C){function E(F){for(var H=[],z=0,J=F.length,V,Y;z<J;)V=F.charCodeAt(z++),55296<=V&&56319>=V&&z<J?(Y=F.charCodeAt(z++),56320==(64512&Y)?H.push(((1023&V)<<10)+(1023&Y)+65536):(H.push(V),z--)):H.push(V);return H}function A(F){for(var H=F.length,z=-1,V='',J;++z<H;)J=F[z],65535<J&&(J-=65536,V+=B(55296|1023&J>>>10),J=56320|1023&J),V+=B(J);return V}function w(F,H){return B(128|63&F>>H)}function S(F){if(0==(4294967168&F))return B(F);var H='';return 0==(4294965248&F)?H=B(192|31&F>>6):0==(4294901760&F)?(H=B(224|15&F>>12),H+=w(F,6)):0==(4292870144&F)&&(H=B(240|7&F>>18),H+=w(F,12),H+=w(F,6)),H+=B(128|63&F),H}function T(){if(L>=I)throw Error('Invalid byte index');var F=255&N[L];if(L++,128==(192&F))return 63&F;throw Error('Invalid continuation byte')}function R(){var F,H,z,J,V;if(L>I)throw Error('Invalid byte index');if(L==I)return!1;if(F=255&N[L],L++,0==(128&F))return F;if(192==(224&F)){var H=T();if(V=(31&F)<<6|H,128<=V)return V;throw Error('Invalid continuation byte')}if(224==(240&F)){if(H=T(),z=T(),V=(15&F)<<12|H<<6|z,2048<=V)return V;throw Error('Invalid continuation byte')}if(240==(248&F)&&(H=T(),z=T(),J=T(),V=(15&F)<<18|H<<12|z<<6|J,65536<=V&&1114111>=V))return V;throw Error('Invalid WTF-8 detected')}var P='object'==typeof u&&u,D='object'==typeof _&&_&&_.exports==P&&_,O='object'==typeof k&&k;(O.global===O||O.window===O)&&(C=O);var B=String.fromCharCode,N,I,L,U={version:'1.0.0',encode:function(H){for(var z=E(H),J=z.length,V=-1,Q='',Y;++V<J;)Y=z[V],Q+=S(Y);return Q},decode:function(H){N=E(H),I=N.length,L=0;for(var z=[],J;!1!==(J=R());)z.push(J);return A(z)}};g=function(){return U}.call(u,f,u,_),!(g!==void 0&&(_.exports=g));var q,M})(this)}).call(u,f(8)(t),function(){return this}())},function(t,u){(function(){'use strict';var f='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',g=new Uint8Array(256);for(var _=0;_<f.length;_++)g[f.charCodeAt(_)]=_;u.encode=function(k){var C=new Uint8Array(k),A=C.length,w='',E;for(E=0;E<A;E+=3)w+=f[C[E]>>2],w+=f[(3&C[E])<<4|C[E+1]>>4],w+=f[(15&C[E+1])<<2|C[E+2]>>6],w+=f[63&C[E+2]];return 2==A%3?w=w.substring(0,w.length-1)+'=':1==A%3&&(w=w.substring(0,w.length-2)+'=='),w},u.decode=function(k){var C=0.75*k.length,E=k.length,w=0,A,S,T,R,P;'='===k[k.length-1]&&(C--,'='===k[k.length-2]&&C--);var D=new ArrayBuffer(C),O=new Uint8Array(D);for(A=0;A<E;A+=4)S=g[k.charCodeAt(A)],T=g[k.charCodeAt(A+1)],R=g[k.charCodeAt(A+2)],P=g[k.charCodeAt(A+3)],O[w++]=S<<2|T>>4,O[w++]=(15&T)<<4|R>>2,O[w++]=(3&R)<<6|63&P;return D}})()},function(t,u){(function(f){function g(S){for(var T=0;T<S.length;T++){var R=S[T];if(R.buffer instanceof ArrayBuffer){var P=R.buffer;if(R.byteLength!==P.byteLength){var D=new Uint8Array(R.byteLength);D.set(new Uint8Array(P,R.byteOffset,R.byteLength)),P=D.buffer}S[T]=P}}}function _(S,T){T=T||{};var R=new C;g(S);for(var P=0;P<S.length;P++)R.append(S[P]);return T.type?R.getBlob(T.type):R.getBlob()}function k(S,T){return g(S),new Blob(S,T||{})}var C=f.BlobBuilder||f.WebKitBlobBuilder||f.MSBlobBuilder||f.MozBlobBuilder,E=function(){try{var S=new Blob(['hi']);return 2===S.size}catch(T){return!1}}(),A=E&&function(){try{var S=new Blob([new Uint8Array([1,2])]);return 2===S.size}catch(T){return!1}}(),w=C&&C.prototype.append&&C.prototype.getBlob;;;t.exports=function(){if(E)return A?f.Blob:k;return w?_:void 0}()}).call(u,function(){return this}())},function(t,u){function f(_){if(_)return g(_)}function g(_){for(var k in f.prototype)_[k]=f.prototype[k];return _}t.exports=f;;f.prototype.on=f.prototype.addEventListener=function(_,k){return this._callbacks=this._callbacks||{},(this._callbacks[_]=this._callbacks[_]||[]).push(k),this},f.prototype.once=function(_,k){function C(){E.off(_,C),k.apply(this,arguments)}var E=this;return this._callbacks=this._callbacks||{},C.fn=k,this.on(_,C),this},f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(_,k){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var C=this._callbacks[_];if(!C)return this;if(1==arguments.length)return delete this._callbacks[_],this;var E;for(var A=0;A<C.length;A++)if(E=C[A],E===k||E.fn===k){C.splice(A,1);break}return this},f.prototype.emit=function(_){this._callbacks=this._callbacks||{};var k=[].slice.call(arguments,1),C=this._callbacks[_];if(C){C=C.slice(0);for(var E=0,A=C.length;E<A;++E)C[E].apply(this,k)}return this},f.prototype.listeners=function(_){return this._callbacks=this._callbacks||{},this._callbacks[_]||[]},f.prototype.hasListeners=function(_){return!!this.listeners(_).length}},function(t,u){u.encode=function(f){var g='';for(var _ in f)f.hasOwnProperty(_)&&(g.length&&(g+='&'),g+=encodeURIComponent(_)+'='+encodeURIComponent(f[_]));return g},u.decode=function(f){var g={},_=f.split('&');for(var k=0,C=_.length;k<C;k++){var E=_[k].split('=');g[decodeURIComponent(E[0])]=decodeURIComponent(E[1])}return g}},function(t,u){t.exports=function(f,g){var _=function(){};_.prototype=g.prototype,f.prototype=new _,f.prototype.constructor=f}},function(t,u){'use strict';function f(S){var T='';do T=_[S%k]+T,S=Math.floor(S/k);while(0<S);return T}function g(){var S=f(+new Date);return S===w?S+'.'+f(E++):(E=0,w=S)}for(var _='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''),k=64,C={},E=0,A=0,w;A<k;A++)C[_[A]]=A;g.encode=f,g.decode=function(T){var R=0;for(A=0;A<T.length;A++)R=R*k+C[T.charAt(A)];return R},t.exports=g},function(t,u,f){(function(g){function _(){}function k(T){C.call(this,T),this.query=this.query||{},S||(!g.___eio&&(g.___eio=[]),S=g.___eio),this.index=S.length;var R=this;S.push(function(P){R.onData(P)}),this.query.j=this.index,g.document&&g.addEventListener&&g.addEventListener('beforeunload',function(){R.script&&(R.script.onerror=_)},!1)}var C=f(21),E=f(33);t.exports=k;var A=/\n/g,w=/\\n/g,S;E(k,C),k.prototype.supportsBinary=!1,k.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),C.prototype.doClose.call(this)},k.prototype.doPoll=function(){var T=this,R=document.createElement('script');this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),R.async=!0,R.src=this.uri(),R.onerror=function(O){T.onError('jsonp poll error',O)};var P=document.getElementsByTagName('script')[0];P?P.parentNode.insertBefore(R,P):(document.head||document.body).appendChild(R),this.script=R;var D='undefined'!=typeof navigator&&/gecko/i.test(navigator.userAgent);D&&setTimeout(function(){var O=document.createElement('iframe');document.body.appendChild(O),document.body.removeChild(O)},100)},k.prototype.doWrite=function(T,R){function P(){D(),R()}function D(){if(O.iframe)try{O.form.removeChild(O.iframe)}catch(q){O.onError('jsonp polling iframe removal error',q)}try{var U='<iframe src="javascript:0" name="'+O.iframeId+'">';L=document.createElement(U)}catch(q){L=document.createElement('iframe'),L.name=O.iframeId,L.src='javascript:0'}L.id=O.iframeId,O.form.appendChild(L),O.iframe=L}var O=this;if(!this.form){var B=document.createElement('form'),N=document.createElement('textarea'),I=this.iframeId='eio_iframe_'+this.index,L;B.className='socketio',B.style.position='absolute',B.style.top='-1000px',B.style.left='-1000px',B.target=I,B.method='POST',B.setAttribute('accept-charset','utf-8'),N.name='d',B.appendChild(N),document.body.appendChild(B),this.form=B,this.area=N}this.form.action=this.uri(),D(),T=T.replace(w,'\\\n'),this.area.value=T.replace(A,'\\n');try{this.form.submit()}catch(U){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){'complete'===O.iframe.readyState&&P()}:this.iframe.onload=P}}).call(u,function(){return this}())},function(t,u,f){(function(g){function _(P){var D=P&&P.forceBase64;D&&(this.supportsBinary=!1),this.perMessageDeflate=P.perMessageDeflate,k.call(this,P)}var k=f(22),C=f(23),E=f(32),A=f(33),w=f(34),S=f(3)('engine.io-client:websocket'),T=g.WebSocket||g.MozWebSocket,R=T;if(!R&&'undefined'==typeof window)try{R=f(37)}catch(P){}t.exports=_,A(_,k),_.prototype.name='websocket',_.prototype.supportsBinary=!0,_.prototype.doOpen=function(){if(this.check()){var P=this.uri(),D={agent:this.agent,perMessageDeflate:this.perMessageDeflate};D.pfx=this.pfx,D.key=this.key,D.passphrase=this.passphrase,D.cert=this.cert,D.ca=this.ca,D.ciphers=this.ciphers,D.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(D.headers=this.extraHeaders);try{this.ws=T?new R(P):new R(P,void 0,D)}catch(O){return this.emit('error',O)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType='nodebuffer'):this.ws.binaryType='arraybuffer',this.addEventListeners()}},_.prototype.addEventListeners=function(){var P=this;this.ws.onopen=function(){P.onOpen()},this.ws.onclose=function(){P.onClose()},this.ws.onmessage=function(D){P.onData(D.data)},this.ws.onerror=function(D){P.onError('websocket error',D)}},'undefined'!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(_.prototype.onData=function(P){var D=this;setTimeout(function(){k.prototype.onData.call(D,P)},0)}),_.prototype.write=function(P){function D(){O.emit('flush'),setTimeout(function(){O.writable=!0,O.emit('drain')},0)}var O=this;this.writable=!1;var B=P.length;for(var N=0,I=B;N<I;N++)(function(L){C.encodePacket(L,O.supportsBinary,function(U){if(!T){var q={};if(L.options&&(q.compress=L.options.compress),O.perMessageDeflate){var M='string'==typeof U?g.Buffer.byteLength(U):U.length;M<O.perMessageDeflate.threshold&&(q.compress=!1)}}try{T?O.ws.send(U):O.ws.send(U,q)}catch(F){S('websocket closed before onclose event')}--B||D()})})(P[N])},_.prototype.onClose=function(){k.prototype.onClose.call(this)},_.prototype.doClose=function(){'undefined'!=typeof this.ws&&this.ws.close()},_.prototype.uri=function(){var P=this.query||{},D=this.secure?'wss':'ws',O='';this.port&&('wss'==D&&443!==this.port||'ws'==D&&80!==this.port)&&(O=':'+this.port),this.timestampRequests&&(P[this.timestampParam]=w()),this.supportsBinary||(P.b64=1),P=E.encode(P),P.length&&(P='?'+P);var B=-1!==this.hostname.indexOf(':');return D+'://'+(B?'['+this.hostname+']':this.hostname)+O+this.path+P},_.prototype.check=function(){return!!R&&!('__initialize'in R&&this.name===_.prototype.name)}}).call(u,function(){return this}())},function(t,u){},function(t,u){var f=[].indexOf;t.exports=function(g,_){if(f)return g.indexOf(_);for(var k=0;k<g.length;++k)if(g[k]===_)return k;return-1}},function(t,u){(function(f){var g=/^[\],:{}\s]*$/,_=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,k=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,C=/(?:^|:|,)(?:\s*\[)+/g,E=/^\s+/,A=/\s+$/;t.exports=function(S){return'string'==typeof S&&S?(S=S.replace(E,'').replace(A,''),f.JSON&&JSON.parse?JSON.parse(S):g.test(S.replace(_,'@').replace(k,']').replace(C,''))?new Function('return '+S)():void 0):null}}).call(u,function(){return this}())},function(t,u,f){'use strict';function g(P,D,O){this.io=P,this.nsp=D,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,O&&O.query&&(this.query=O.query),this.io.autoConnect&&this.open()}var _=f(6),k=f(41),C=f(42),E=f(43),A=f(44),w=f(3)('socket.io-client:socket'),S=f(45);t.exports=u=g;var T={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},R=k.prototype.emit;k(g.prototype),g.prototype.subEvents=function(){if(!this.subs){var P=this.io;this.subs=[E(P,'open',A(this,'onopen')),E(P,'packet',A(this,'onpacket')),E(P,'close',A(this,'onclose'))]}},g.prototype.open=g.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),'open'===this.io.readyState&&this.onopen(),this.emit('connecting'),this)},g.prototype.send=function(){var P=C(arguments);return P.unshift('message'),this.emit.apply(this,P),this},g.prototype.emit=function(P){if(T.hasOwnProperty(P))return R.apply(this,arguments),this;var D=C(arguments),O=_.EVENT;S(D)&&(O=_.BINARY_EVENT);var B={type:O,data:D};return B.options={},B.options.compress=!this.flags||!1!==this.flags.compress,'function'==typeof D[D.length-1]&&(w('emitting packet with ack id %d',this.ids),this.acks[this.ids]=D.pop(),B.id=this.ids++),this.connected?this.packet(B):this.sendBuffer.push(B),delete this.flags,this},g.prototype.packet=function(P){P.nsp=this.nsp,this.io.packet(P)},g.prototype.onopen=function(){w('transport is open - connecting'),'/'!==this.nsp&&(this.query?this.packet({type:_.CONNECT,query:this.query}):this.packet({type:_.CONNECT}))},g.prototype.onclose=function(P){w('close (%s)',P),this.connected=!1,this.disconnected=!0,delete this.id,this.emit('disconnect',P)},g.prototype.onpacket=function(P){if(P.nsp===this.nsp)switch(P.type){case _.CONNECT:this.onconnect();break;case _.EVENT:this.onevent(P);break;case _.BINARY_EVENT:this.onevent(P);break;case _.ACK:this.onack(P);break;case _.BINARY_ACK:this.onack(P);break;case _.DISCONNECT:this.ondisconnect();break;case _.ERROR:this.emit('error',P.data);}},g.prototype.onevent=function(P){var D=P.data||[];w('emitting event %j',D),null!=P.id&&(w('attaching ack callback to event'),D.push(this.ack(P.id))),this.connected?R.apply(this,D):this.receiveBuffer.push(D)},g.prototype.ack=function(P){var D=this,O=!1;return function(){if(!O){O=!0;var B=C(arguments);w('sending ack %j',B);var N=S(B)?_.BINARY_ACK:_.ACK;D.packet({type:N,id:P,data:B})}}},g.prototype.onack=function(P){var D=this.acks[P.id];'function'==typeof D?(w('calling ack %s with %j',P.id,P.data),D.apply(this,P.data),delete this.acks[P.id]):w('bad ack %s',P.id)},g.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit('connect'),this.emitBuffered()},g.prototype.emitBuffered=function(){var P;for(P=0;P<this.receiveBuffer.length;P++)R.apply(this,this.receiveBuffer[P]);for(this.receiveBuffer=[],P=0;P<this.sendBuffer.length;P++)this.packet(this.sendBuffer[P]);this.sendBuffer=[]},g.prototype.ondisconnect=function(){w('server disconnect (%s)',this.nsp),this.destroy(),this.onclose('io server disconnect')},g.prototype.destroy=function(){if(this.subs){for(var P=0;P<this.subs.length;P++)this.subs[P].destroy();this.subs=null}this.io.destroy(this)},g.prototype.close=g.prototype.disconnect=function(){return this.connected&&(w('performing disconnect (%s)',this.nsp),this.packet({type:_.DISCONNECT})),this.destroy(),this.connected&&this.onclose('io client disconnect'),this},g.prototype.compress=function(P){return this.flags=this.flags||{},this.flags.compress=P,this}},function(t,u){function f(_){if(_)return g(_)}function g(_){for(var k in f.prototype)_[k]=f.prototype[k];return _}t.exports=f;;f.prototype.on=f.prototype.addEventListener=function(_,k){return this._callbacks=this._callbacks||{},(this._callbacks['$'+_]=this._callbacks['$'+_]||[]).push(k),this},f.prototype.once=function(_,k){function C(){this.off(_,C),k.apply(this,arguments)}return C.fn=k,this.on(_,C),this},f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(_,k){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var C=this._callbacks['$'+_];if(!C)return this;if(1==arguments.length)return delete this._callbacks['$'+_],this;var E;for(var A=0;A<C.length;A++)if(E=C[A],E===k||E.fn===k){C.splice(A,1);break}return this},f.prototype.emit=function(_){this._callbacks=this._callbacks||{};var k=[].slice.call(arguments,1),C=this._callbacks['$'+_];if(C){C=C.slice(0);for(var E=0,A=C.length;E<A;++E)C[E].apply(this,k)}return this},f.prototype.listeners=function(_){return this._callbacks=this._callbacks||{},this._callbacks['$'+_]||[]},f.prototype.hasListeners=function(_){return!!this.listeners(_).length}},function(t,u){t.exports=function(g,_){var k=[];_=_||0;for(var C=_||0;C<g.length;C++)k[C-_]=g[C];return k}},function(t,u){'use strict';t.exports=function(g,_,k){return g.on(_,k),{destroy:function(){g.removeListener(_,k)}}}},function(t,u){var f=[].slice;t.exports=function(g,_){if('string'==typeof _&&(_=g[_]),'function'!=typeof _)throw new Error('bind() requires a function');var k=f.call(arguments,2);return function(){return _.apply(g,k.concat(f.call(arguments)))}}},function(t,u,f){(function(g){var _=f(9);t.exports=function(C){function E(A){if(!A)return!1;if(g.Buffer&&g.Buffer.isBuffer&&g.Buffer.isBuffer(A)||g.ArrayBuffer&&A instanceof ArrayBuffer||g.Blob&&A instanceof Blob||g.File&&A instanceof File)return!0;if(_(A)){for(var w=0;w<A.length;w++)if(E(A[w]))return!0;}else if(A&&'object'==typeof A)for(var S in A.toJSON&&'function'==typeof A.toJSON&&(A=A.toJSON()),A)if(Object.prototype.hasOwnProperty.call(A,S)&&E(A[S]))return!0;return!1}return E(C)}}).call(u,function(){return this}())},function(t,u){function f(g){g=g||{},this.ms=g.min||100,this.max=g.max||10000,this.factor=g.factor||2,this.jitter=0<g.jitter&&1>=g.jitter?g.jitter:0,this.attempts=0}t.exports=f,f.prototype.duration=function(){var g=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var _=Math.random(),k=Math.floor(_*this.jitter*g);g=0==(1&Math.floor(10*_))?g-k:g+k}return 0|Math.min(g,this.max)},f.prototype.reset=function(){this.attempts=0},f.prototype.setMin=function(g){this.ms=g},f.prototype.setMax=function(g){this.max=g},f.prototype.setJitter=function(g){this.jitter=g}}])});;var globals={};'undefined'!=typeof window&&(globals.window=window),'undefined'!=typeof document&&(globals.document=document);let compatibilityModeData_,uniqueIdCounter_=1;const UID_PROPERTY='core_'+(1000000000*Math.random()>>>0);function abstractMethod(){throw Error('Unimplemented abstract method')}function collectSuperClassesProperty(t,u){for(var f=[t[u]];t.__proto__&&!t.__proto__.isPrototypeOf(Function);)t=t.__proto__,f.push(t[u]);return f}function disableCompatibilityMode(){compatibilityModeData_=void 0}function enableCompatibilityMode(t={}){compatibilityModeData_=t}function getCompatibilityModeData(){return void 0===compatibilityModeData_&&'undefined'!=typeof window&&window.__METAL_COMPATIBILITY__&&enableCompatibilityMode(window.__METAL_COMPATIBILITY__),compatibilityModeData_}function getFunctionName(t){if(!t.name){var u=t.toString();t.name=u.substring(9,u.indexOf('('))}return t.name}function getUid(t,u){if(t){var f=t[UID_PROPERTY];return u&&!t.hasOwnProperty(UID_PROPERTY)&&(f=null),f||(t[UID_PROPERTY]=uniqueIdCounter_++)}return uniqueIdCounter_++}function identityFunction(t){return t}function isBoolean(t){return'boolean'==typeof t}function isDef(t){return t!==void 0}function isDefAndNotNull(t){return isDef(t)&&!isNull(t)}function isDocument(t){return t&&'object'==typeof t&&9===t.nodeType}function isElement(t){return t&&'object'==typeof t&&1===t.nodeType}function isFunction(t){return'function'==typeof t}function isNull(t){return null===t}function isNumber(t){return'number'==typeof t}function isWindow(t){return null!==t&&t===t.window}function isObject(t){var u=typeof t;return'object'==u&&null!==t||'function'==u}function isPromise(t){return t&&'object'==typeof t&&'function'==typeof t.then}function isString(t){return'string'==typeof t||t instanceof String}function mergeSuperClassesProperty(t,u,f){var g=u+'_MERGED';if(t.hasOwnProperty(g))return!1;var _=collectSuperClassesProperty(t,u);return f&&(_=f(_)),t[g]=_,!0}function nullFunction(){}var core$2=Object.freeze({UID_PROPERTY:UID_PROPERTY,abstractMethod:abstractMethod,collectSuperClassesProperty:collectSuperClassesProperty,disableCompatibilityMode:disableCompatibilityMode,enableCompatibilityMode:enableCompatibilityMode,getCompatibilityModeData:getCompatibilityModeData,getFunctionName:getFunctionName,getUid:getUid,identityFunction:identityFunction,isBoolean:isBoolean,isDef:isDef,isDefAndNotNull:isDefAndNotNull,isDocument:isDocument,isElement:isElement,isFunction:isFunction,isNull:isNull,isNumber:isNumber,isWindow:isWindow,isObject:isObject,isPromise:isPromise,isString:isString,mergeSuperClassesProperty:mergeSuperClassesProperty,nullFunction:nullFunction});class array{static equal(t,u){if(t.length!==u.length)return!1;for(var f=0;f<t.length;f++)if(t[f]!==u[f])return!1;return!0}static firstDefinedValue(t){for(var u=0;u<t.length;u++)if(t[u]!==void 0)return t[u]}static flatten(t,u){var f=u||[];for(var g=0;g<t.length;g++)Array.isArray(t[g])?array.flatten(t[g],f):f.push(t[g]);return f}static remove(t,u){var f=t.indexOf(u),g;return(g=0<=f)&&array.removeAt(t,f),g}static removeAt(t,u){return 1===Array.prototype.splice.call(t,u,1).length}static slice(t,u,f){var g=[],_=isDef(f)?f:t.length;for(var k=u;k<_;k++)g.push(t[k]);return g}}var async={};async.throwException=function(t){async.nextTick(function(){throw t})},async.run=function(t,u){async.run.workQueueScheduled_||(async.nextTick(async.run.processWorkQueue),async.run.workQueueScheduled_=!0),async.run.workQueue_.push(new async.run.WorkItem_(t,u))},async.run.workQueueScheduled_=!1,async.run.workQueue_=[],async.run.processWorkQueue=function(){for(;async.run.workQueue_.length;){var t=async.run.workQueue_;async.run.workQueue_=[];for(var u=0;u<t.length;u++){var f=t[u];try{f.fn.call(f.scope)}catch(g){async.throwException(g)}}}async.run.workQueueScheduled_=!1},async.run.WorkItem_=function(t,u){this.fn=t,this.scope=u},async.nextTick=function(t,u){var f=t;return u&&(f=t.bind(u)),f=async.nextTick.wrapCallback_(f),'function'==typeof setImmediate?void setImmediate(f):void(!async.nextTick.setImmediate_&&(async.nextTick.setImmediate_=async.nextTick.getSetImmediateEmulator_()),async.nextTick.setImmediate_(f))},async.nextTick.setImmediate_=null,async.nextTick.getSetImmediateEmulator_=function(){var t;if('function'==typeof MessageChannel&&(t=MessageChannel),'undefined'==typeof t&&'undefined'!=typeof window&&window.postMessage&&window.addEventListener&&(t=function(){var _=document.createElement('iframe');_.style.display='none',_.src='',document.documentElement.appendChild(_);var k=_.contentWindow,C=k.document;C.open(),C.write(''),C.close();var E='callImmediate'+Math.random(),A=k.location.protocol+'//'+k.location.host,w=function(S){S.origin!==A&&S.data!==E||this.port1.onmessage()}.bind(this);k.addEventListener('message',w,!1),this.port1={},this.port2={postMessage:function(){k.postMessage(E,A)}}}),'undefined'!=typeof t){var u=new t,f={},g=f;return u.port1.onmessage=function(){f=f.next;var _=f.cb;f.cb=null,_()},function(_){g.next={cb:_},g=g.next,u.port2.postMessage(0)}}return'undefined'!=typeof document&&'onreadystatechange'in document.createElement('script')?function(_){var k=document.createElement('script');k.onreadystatechange=function(){k.onreadystatechange=null,k.parentNode.removeChild(k),k=null,_(),_=null},document.documentElement.appendChild(k)}:function(_){setTimeout(_,0)}},async.nextTick.wrapCallback_=function(t){return t};class Disposable{constructor(){this.disposed_=!1}dispose(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)}disposeInternal(){}isDisposed(){return this.disposed_}}class string{static caseInsensitiveCompare(t,u){var f=(t+'').toLowerCase(),g=(u+'').toLowerCase();if(f<g)return-1;return f===g?0:1}static collapseBreakingSpaces(t){return t.replace(/[\t\r\n ]+/g,' ').replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,'')}static escapeRegex(t){return(t+'').replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,'\\$1').replace(/\x08/g,'\\x08')}static getRandomString(){var t=2147483648;return Math.floor(Math.random()*t).toString(36)+Math.abs(Math.floor(Math.random()*t)^Date.now()).toString(36)}static hashCode(t){var u=0;for(var f=0,g=t.length;f<g;f++)u=31*u+t.charCodeAt(f),u%=4294967296;return u}static replaceInterval(t,u,f,g){return t.substring(0,u)+g+t.substring(f)}}class Embodied{constructor(){this.body_={}}body(){return this.body_}static toBody(t){return t instanceof Embodied?t.body():t}toString(){return JSON.stringify(this.body())}}class FilterBody{constructor(t,u,f){var g={operator:isDef(f)?u:'='},_=isDef(f)?f:u;isDefAndNotNull(_)&&(_ instanceof Embodied&&(_=_.body()),g.value=_),isDefAndNotNull(t)?this.createBody_(t,g):this.createBody_('and',[])}add(t,u){u?this.addArrayOperator_(t,u):this.createBody_(t,this.body_)}addArrayOperator_(t,u){this.body_[t]instanceof Array||this.createBody_(t,[this.body_]),this.body_[t].push(u.body())}addMany(t,...u){for(var f=0;f<u.length;f++)this.add(t,u[f])}createBody_(t,u){this.body_={},this.body_[t]=u}getObject(){return this.body_}}class Geo{static boundingBox(t,u){return new Geo.BoundingBox(t,u)}static circle(t,u){return new Geo.Circle(t,u)}static line(...t){return new Geo.Line(...t)}static point(t,u){return new Geo.Point(t,u)}static polygon(...t){return new Geo.Polygon(...t)}}class Point extends Embodied{constructor(t,u){super(),this.body_=[t,u]}}Geo.Point=Point;class Line extends Embodied{constructor(...t){super(),this.body_={type:'linestring',coordinates:t.map(u=>Embodied.toBody(u))}}}Geo.Line=Line;class BoundingBox extends Embodied{constructor(t,u){super(),this.body_={type:'envelope',coordinates:[Embodied.toBody(t),Embodied.toBody(u)]}}getPoints(){return this.body_.coordinates}}Geo.BoundingBox=BoundingBox;class Circle extends Embodied{constructor(t,u){super(),this.body_={type:'circle',coordinates:Embodied.toBody(t),radius:u}}getCenter(){return this.body_.coordinates}getRadius(){return this.body_.radius}}Geo.Circle=Circle;class Polygon extends Embodied{constructor(...t){super(),this.body_={type:'polygon',coordinates:[]},this.addCoordinates_(...t)}addCoordinates_(...t){this.body_.coordinates.push(t.map(u=>Embodied.toBody(u)))}hole(...t){return this.addCoordinates_(...t),this}}Geo.Polygon=Polygon;class Range extends Embodied{constructor(t,u){super(),isDefAndNotNull(t)&&(this.body_.from=t),isDefAndNotNull(u)&&(this.body_.to=u)}static from(t){return new Range(t)}static range(t,u){return new Range(t,u)}static to(t){return new Range(null,t)}}class Filter extends Embodied{constructor(t,u,f){super(),this.body_=new FilterBody(t,u,f)}add(t,u,f,g){var _=u?Filter.toFilter(u,f,g):null;return this.body_.add(t,_),this}addMany(t,...u){return this.body_.addMany(t,...u),this}and(t,u,f){return this.add('and',t,u,f)}static any(t){var u=Array.prototype.slice.call(arguments,1);return 1===u.length&&u[0]instanceof Array&&(u=u[0]),new Filter(t,'any',u)}static boundingBox(t,u,f){return u instanceof Geo.BoundingBox?Filter.polygon(t,...u.getPoints()):Filter.polygon(t,u,f)}body(){return this.body_.getObject()}static distance(t,u,f){var g=u,_=f;return u instanceof Geo.Circle?(g=u.getCenter(),_=Range.to(u.getRadius())):!(f instanceof Range)&&(_=Range.to(f)),Filter.distanceInternal_(t,g,_)}static distanceInternal_(t,u,f){var g={location:Embodied.toBody(u)};return f=f.body(),f.from&&(g.min=f.from),f.to&&(g.max=f.to),Filter.field(t,'gd',g)}static equal(t,u){return new Filter(t,'=',u)}static exists(t){return Filter.field(t,'exists',null)}static fuzzy(t,u,f){return Filter.fuzzyInternal_('fuzzy',t,u,f)}static fuzzyInternal_(t,u,f,g){var _=isString(f),k={query:_?f:u},C=_?g:f;C&&(k.fuzziness=C);var E=_?u:Filter.ALL;return Filter.field(E,t,k)}static gt(t,u){return new Filter(t,'>',u)}static gte(t,u){return new Filter(t,'>=',u)}static match(t,u){var f=isString(u)?t:Filter.ALL,g=isString(u)?u:t;return Filter.field(f,'match',g)}static missing(t){return Filter.field(t,'missing',null)}static phrase(t,u){var f=isString(u)?t:Filter.ALL,g=isString(u)?u:t;return Filter.field(f,'phrase',g)}static polygon(t,...u){return u=u.map(f=>Embodied.toBody(f)),Filter.field(t,'gp',u)}static prefix(t,u){var f=u?t:Filter.ALL,g=u?u:t;return Filter.field(f,'prefix',g)}static range(t,u,f){var g=u;return g instanceof Range||(g=Range.range(u,f)),Filter.field(t,'range',g)}static regex(t,u){return new Filter(t,'~',u)}static shape(t,...u){u=u.map(g=>Embodied.toBody(g));var f={type:'geometrycollection',geometries:u};return Filter.field(t,'gs',f)}static similar(t,u){var f=isString(u)?t:Filter.ALL,g={query:isString(u)?u:t};return Filter.field(f,'similar',g)}static lt(t,u){return new Filter(t,'<',u)}static lte(t,u){return new Filter(t,'<=',u)}static none(t){var u=Array.prototype.slice.call(arguments,1);return 1===u.length&&u[0]instanceof Array&&(u=u[0]),new Filter(t,'none',u)}static notEqual(t,u){return new Filter(t,'!=',u)}static not(t,u,f){return Filter.toFilter(t,u,f).add('not')}static field(t,u,f){return new Filter(t,u,f)}or(t,u,f){return this.add('or',t,u,f)}static toFilter(t,u,f){var g=t;return g instanceof Filter||(g=Filter.field(t,u,f)),g}}Filter.ALL='*';function parseFromAnchor(t){var u=document.createElement('a');return u.href=t,{hash:u.hash,hostname:u.hostname,password:u.password,pathname:'/'===u.pathname[0]?u.pathname:'/'+u.pathname,port:u.port,protocol:u.protocol,search:u.search,username:u.username}}function parse(t){return isFunction(URL)&&URL.length?new URL(t):parseFromAnchor(t)}var create=Object.create;class MultiMap extends Disposable{constructor(){super(),this.keys=create(null),this.values=create(null)}add(t,u){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=this.values[t.toLowerCase()]||[],this.values[t.toLowerCase()].push(u),this}clear(){return this.keys=create(null),this.values=create(null),this}contains(t){return t.toLowerCase()in this.values}disposeInternal(){this.values=null}static fromObject(t){var u=new MultiMap,f=Object.keys(t);for(var g=0;g<f.length;g++)u.set(f[g],t[f[g]]);return u}get(t){var u=this.values[t.toLowerCase()];if(u)return u[0]}getAll(t){return this.values[t.toLowerCase()]}isEmpty(){return 0===this.size()}names(){return Object.keys(this.values).map(t=>this.keys[t])}remove(t){return delete this.keys[t.toLowerCase()],delete this.values[t.toLowerCase()],this}set(t,u){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=[u],this}size(){return this.names().length}toString(){return JSON.stringify(this.values)}}const assertChildHasNoParent=function(t){if(t.getParent())throw new Error('Cannot add child with parent.')};var parseFn_=parse;class Uri{constructor(t=''){this.url=Uri.parse(this.maybeAddProtocolAndHostname_(t))}addParametersFromMultiMap(t){return t.names().forEach(u=>{t.getAll(u).forEach(f=>{this.addParameterValue(u,f)})}),this}addParameterValue(t,u){return this.ensureQueryInitialized_(),isDef(u)&&(u=u+''),this.query.add(t,u),this}addParameterValues(t,u){return u.forEach(f=>this.addParameterValue(t,f)),this}ensureQueryInitialized_(){if(!this.query){this.query=new MultiMap;var t=this.url.search;t&&t.substring(1).split('&').forEach(u=>{var[f,g]=u.split('=');isDef(g)&&(g=Uri.urlDecode(g)),this.addParameterValue(f,g)})}}getHash(){return this.url.hash||''}getHost(){var t=this.getHostname();if(t){var u=this.getPort();u&&'80'!==u&&(t+=':'+u)}return t}getHostname(){var t=this.url.hostname;return t===Uri.HOSTNAME_PLACEHOLDER?'':t}getOrigin(){var t=this.getHost();return t?this.getProtocol()+'//'+t:''}getParameterValue(t){return this.ensureQueryInitialized_(),this.query.get(t)}getParameterValues(t){return this.ensureQueryInitialized_(),this.query.getAll(t)}getParameterNames(){return this.ensureQueryInitialized_(),this.query.names()}static getParseFn(){return parseFn_}getPathname(){return this.url.pathname}getPort(){return this.url.port}getProtocol(){return this.url.protocol}getSearch(){var t='',u='';return this.getParameterNames().forEach(f=>{this.getParameterValues(f).forEach(g=>{u+=f,isDef(g)&&(u+='='+encodeURIComponent(g)),u+='&'})}),u=u.slice(0,-1),u&&(t+='?'+u),t}hasParameter(t){return this.ensureQueryInitialized_(),this.query.contains(t)}makeUnique(){return this.setParameterValue(Uri.RANDOM_PARAM,string.getRandomString()),this}maybeAddProtocolAndHostname_(t){var u=t;if(-1===t.indexOf('://')&&0!==t.indexOf('javascript:'))switch(u=Uri.DEFAULT_PROTOCOL,('/'!==t[0]||'/'!==t[1])&&(u+='//'),t.charAt(0)){case'.':case'?':case'#':u+=Uri.HOSTNAME_PLACEHOLDER,u+='/',u+=t;break;case'':case'/':'/'!==t[1]&&(u+=Uri.HOSTNAME_PLACEHOLDER),u+=t;break;default:u+=t;}return u}static normalizeObject(t){var u=t.pathname?t.pathname.length:0;return 1<u&&'/'===t.pathname[u-1]&&(t.pathname=t.pathname.substr(0,u-1)),t}static parse(t){return Uri.normalizeObject(parseFn_(t))}removeParameter(t){return this.ensureQueryInitialized_(),this.query.remove(t),this}removeUnique(){return this.removeParameter(Uri.RANDOM_PARAM),this}setHash(t){return this.url.hash=t,this}setHostname(t){return this.url.hostname=t,this}setParameterValue(t,u){return this.removeParameter(t),this.addParameterValue(t,u),this}setParameterValues(t,u){return this.removeParameter(t),u.forEach(f=>this.addParameterValue(t,f)),this}setPathname(t){return this.url.pathname=t,this}setPort(t){return this.url.port=t,this}static setParseFn(t){parseFn_=t}setProtocol(t){return this.url.protocol=t,':'!==this.url.protocol[this.url.protocol.length-1]&&(this.url.protocol+=':'),this}toString(){var t='',u=this.getHost();return u&&(t+=this.getProtocol()+'//'),t+=u+this.getPathname()+this.getSearch()+this.getHash(),t}static joinPaths(t,...u){return'/'===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),u=u.map(f=>'/'===f.charAt(0)?f.substring(1):f),[t].concat(u).join('/').replace(/\/$/,'')}static urlDecode(t){return decodeURIComponent(t.replace(/\+/g,' '))}}Uri.DEFAULT_PROTOCOL='http:',Uri.HOSTNAME_PLACEHOLDER='hostname'+Date.now(),Uri.RANDOM_PARAM='zx';function assertBrowserEnvironment(){if(!globals.window)throw new Error('Sign-in type not supported in this environment')}function assertDefAndNotNull(t,u){if(!isDefAndNotNull(t))throw new Error(u)}function assertFunction(t,u){if(!isFunction(t))throw new Error(u)}function assertObject(t,u){if(!isObject(t))throw new Error(u)}function assertResponseSucceeded(t){if(!t.succeeded())throw t.body();return t}function assertUserSignedIn(t){if(!isDefAndNotNull(t))throw new Error('You must be signed-in to perform this operation')}function assertUriWithNoPath(t,u){var f=new Uri(t);if(1<f.getPathname().length)throw new Error(u)}class Auth{constructor(t,u=null){this.token=isString(u)?null:t,this.email=isString(u)?t:null,this.password=u,this.createdAt=null,this.id=null,this.name=null,this.photoUrl=null,this.wedeployClient=null}static create(t,u){return new Auth(t,u)}getCreatedAt(){return this.createdAt}getEmail(){return this.email}getId(){return this.id}getName(){return this.name}getPassword(){return this.password}getPhotoUrl(){return this.photoUrl}getToken(){return this.token}hasCreatedAt(){return isDefAndNotNull(this.createdAt)}hasEmail(){return isDefAndNotNull(this.email)}hasId(){return isDefAndNotNull(this.id)}hasName(){return isDefAndNotNull(this.name)}hasPassword(){return isDefAndNotNull(this.password)}hasPhotoUrl(){return isDefAndNotNull(this.photoUrl)}hasToken(){return isDefAndNotNull(this.token)}setCreatedAt(t){this.createdAt=t}setEmail(t){this.email=t}setId(t){this.id=t}setName(t){this.name=t}setPassword(t){this.password=t}setPhotoUrl(t){this.photoUrl=t}setToken(t){this.token=t}setWedeployClient(t){this.wedeployClient=t}updateUser(t){return assertObject(t,'User data must be specified as object'),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/users',this.getId().toString()).auth(this).patch(t).then(u=>assertResponseSucceeded(u))}deleteUser(){return assertDefAndNotNull(this.getId(),'Cannot delete user without id'),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/users',this.getId().toString()).auth(this).delete().then(t=>assertResponseSucceeded(t))}}class ApiHelper{constructor(t){assertDefAndNotNull(t,'WeDeploy client reference must be specified'),this.wedeployClient=t}auth(t,u){return this.helperAuthScope=t,this.helperAuthScope instanceof Auth||(this.helperAuthScope=Auth.create(t,u)),this}}class AuthProvider{constructor(){this.provider=null,this.providerScope=null,this.redirectUri=null,this.scope=null}hasProvider(){return isDefAndNotNull(this.provider)}hasProviderScope(){return isDefAndNotNull(this.providerScope)}hasRedirectUri(){return isDefAndNotNull(this.redirectUri)}hasScope(){return isDefAndNotNull(this.scope)}makeAuthorizationUrl(t){var u=new Uri(t);return u.setPathname('/oauth/authorize'),this.hasProvider()&&u.setParameterValue('provider',this.getProvider()),this.hasProviderScope()&&u.setParameterValue('provider_scope',this.getProviderScope()),this.hasRedirectUri()&&u.setParameterValue('redirect_uri',this.getRedirectUri()),this.hasScope()&&u.setParameterValue('scope',this.getScope()),u.toString()}getProvider(){return this.provider}getProviderScope(){return this.providerScope}getRedirectUri(){return this.redirectUri}getScope(){return this.scope}setProviderScope(t){assertStringIfDefAndNotNull(t,'Provider scope must be a string'),this.providerScope=t}setRedirectUri(t){assertStringIfDefAndNotNull(t,'Redirect uri must be a string'),this.redirectUri=t}setScope(t){assertStringIfDefAndNotNull(t,'Scope must be a string'),this.scope=t}}function assertStringIfDefAndNotNull(t,u){if(isDefAndNotNull(t)&&!isString(t))throw new Error(u)}class FacebookAuthProvider extends AuthProvider{constructor(){super(),this.provider=FacebookAuthProvider.PROVIDER}}FacebookAuthProvider.PROVIDER='facebook';class GithubAuthProvider extends AuthProvider{constructor(){super(),this.provider=GithubAuthProvider.PROVIDER}}GithubAuthProvider.PROVIDER='github';class GoogleAuthProvider extends AuthProvider{constructor(){super(),this.provider=GoogleAuthProvider.PROVIDER}}GoogleAuthProvider.PROVIDER='google';class StorageMechanism{clear(){throw Error('Unimplemented abstract method')}set(t,u){throw Error('Unimplemented abstract method')}get(t){throw Error('Unimplemented abstract method')}static isSupported(){return!0}keys(){throw Error('Unimplemented abstract method')}remove(t){throw Error('Unimplemented abstract method')}size(){throw Error('Unimplemented abstract method')}}class Storage{constructor(t){assertMechanismDefAndNotNull(t),assertMechanismIntanceOf(t),this.mechanism=t}clear(){this.mechanism.clear()}set(t,u){return core$2.isDef(u)?void this.mechanism.set(t,JSON.stringify(u)):void this.mechanism.remove(t)}get(t){var u;try{u=this.mechanism.get(t)}catch(f){return void 0}if(core$2.isNull(u))return void 0;try{return JSON.parse(u)}catch(f){throw Storage.ErrorCode.INVALID_VALUE}}keys(){return this.mechanism.keys()}remove(t){this.mechanism.remove(t)}size(){return this.mechanism.size()}values(){return this.keys().map(t=>this.get(t))}}Storage.ErrorCode={INVALID_VALUE:'Storage: Invalid value was encountered'};function assertMechanismDefAndNotNull(t){if(!core$2.isDefAndNotNull(t))throw Error('Storage mechanism is required')}function assertMechanismIntanceOf(t){if(!(t instanceof StorageMechanism))throw Error('Storage mechanism must me an implementation of StorageMechanism')}class LocalStorageMechanism extends StorageMechanism{storage(){return LocalStorageMechanism.globals.localStorage}clear(){this.storage().clear()}keys(){return Object.keys(this.storage())}get(t){return this.storage().getItem(t)}static isSupported(){return'undefined'!=typeof window}remove(t){this.storage().removeItem(t)}set(t,u){this.storage().setItem(t,u)}size(){return this.storage().length}}LocalStorageMechanism.isSupported()&&(LocalStorageMechanism.globals={localStorage:window.localStorage});class AuthApiHelper extends ApiHelper{constructor(t){super(t),this.currentUser=null,this.onSignInCallback=null,this.onSignOutCallback=null,LocalStorageMechanism.isSupported()&&(this.storage=new Storage(new LocalStorageMechanism())),this.processSignIn_(),this.provider={Facebook:FacebookAuthProvider,Google:GoogleAuthProvider,Github:GithubAuthProvider}}createUser(t){return assertObject(t,'User data must be specified as object'),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/users').post(t).then(u=>assertResponseSucceeded(u)).then(u=>this.makeUserAuthFromData(u.body()))}getHrefWithoutFragment_(){var t=globals.window.location;return t.protocol+'//'+t.host+t.pathname+(t.search?t.search:'')}getRedirectAccessToken_(){if(globals.window){var t=globals.window.location.hash;if(0===t.indexOf('#access_token='))return t.substring(14)}return null}getUser(t){return assertDefAndNotNull(t,'User userId must be specified'),assertUserSignedIn(this.currentUser),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/users',t).auth(this.resolveAuthScope().token).get().then(u=>assertResponseSucceeded(u)).then(u=>this.makeUserAuthFromData(u.body()))}loadCurrentUser(t){return assertDefAndNotNull(t,'User token must be specified'),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/user').auth(t).get().then(u=>{var f=u.body();return f.token=t,this.currentUser=this.makeUserAuthFromData(f),this.storage&&this.storage.set('currentUser',f),this.currentUser})}makeUserAuthFromData(t){var u=new Auth;return u.setWedeployClient(this.wedeployClient),u.setCreatedAt(t.createdAt),u.setEmail(t.email),u.setId(t.id),u.setName(t.name),u.setPhotoUrl(t.photoUrl),u.setToken(t.token),u}maybeCallOnSignInCallback_(){this.onSignInCallback&&this.onSignInCallback.call(this,this.currentUser)}maybeCallOnSignOutCallback_(){this.onSignOutCallback&&this.onSignOutCallback.call(this,this.currentUser)}onSignIn(t){assertFunction(t,'Sign-in callback must be a function'),this.onSignInCallback=t}onSignOut(t){assertFunction(t,'Sign-out callback must be a function'),this.onSignOutCallback=t}processSignIn_(){var t=this.getRedirectAccessToken_();if(t)return this.removeUrlFragmentCompletely_(),void this.loadCurrentUser(t).then(()=>this.maybeCallOnSignInCallback_());var u=this.storage&&this.storage.get('currentUser');u&&(this.currentUser=this.makeUserAuthFromData(u))}removeUrlFragmentCompletely_(){globals.window.history.pushState({},document.title,window.location.pathname+window.location.search)}resolveAuthScope(){return this.helperAuthScope?this.helperAuthScope:this.currentUser}sendPasswordResetEmail(t){return assertDefAndNotNull(t,'Send password reset email must be specified'),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/user/recover').param('email',t).post().then(u=>assertResponseSucceeded(u))}signInWithEmailAndPassword(t,u){return assertDefAndNotNull(t,'Sign-in email must be specified'),assertDefAndNotNull(u,'Sign-in password must be specified'),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/oauth/token').param('grant_type','password').param('username',t).param('password',u).get().then(f=>assertResponseSucceeded(f)).then(f=>this.loadCurrentUser(f.body().access_token)).then(f=>{return this.maybeCallOnSignInCallback_(),f})}signInWithRedirect(t){assertBrowserEnvironment(),assertDefAndNotNull(t,'Sign-in provider must be defined'),assertSupportedProvider(t),t.hasRedirectUri()||t.setRedirectUri(this.getHrefWithoutFragment_()),globals.window.location.href=t.makeAuthorizationUrl(this.wedeployClient.authUrl_)}signOut(){return assertUserSignedIn(this.currentUser),this.wedeployClient.url(this.wedeployClient.authUrl_).path('/oauth/revoke').param('token',this.currentUser.token).get().then(t=>assertResponseSucceeded(t)).then(t=>{return this.maybeCallOnSignOutCallback_(),this.unloadCurrentUser_(),t})}unloadCurrentUser_(){this.currentUser=null,this.storage&&this.storage.remove('currentUser')}}function assertSupportedProvider(t){switch(t.constructor.PROVIDER){case FacebookAuthProvider.PROVIDER:case GithubAuthProvider.PROVIDER:case GoogleAuthProvider.PROVIDER:break;default:throw new Error('Sign-in provider not supported');}}class Aggregation{constructor(t,u,f){this.field_=t,this.operator_=u,this.value_=f}static avg(t){return Aggregation.field(t,'avg')}static count(t){return Aggregation.field(t,'count')}static distance(t,u,...f){return new Aggregation.DistanceAggregation(t,u,...f)}static extendedStats(t){return Aggregation.field(t,'extendedStats')}getField(){return this.field_}getOperator(){return this.operator_}getValue(){return this.value_}static histogram(t,u){return new Aggregation(t,'histogram',u)}static max(t){return Aggregation.field(t,'max')}static min(t){return Aggregation.field(t,'min')}static missing(t){return Aggregation.field(t,'missing')}static field(t,u){return new Aggregation(t,u)}static range(t,...u){return new Aggregation.RangeAggregation(t,...u)}static stats(t){return Aggregation.field(t,'stats')}static sum(t){return Aggregation.field(t,'sum')}static terms(t){return Aggregation.field(t,'terms')}}class DistanceAggregation extends Aggregation{constructor(t,u,...f){super(t,'geoDistance',{}),this.value_.location=Embodied.toBody(u),this.value_.ranges=f.map(g=>g.body())}range(t,u){var f=t;return f instanceof Range||(f=Range.range(t,u)),this.value_.ranges.push(f.body()),this}unit(t){return this.value_.unit=t,this}}Aggregation.DistanceAggregation=DistanceAggregation;class RangeAggregation extends Aggregation{constructor(t,...u){super(t,'range'),this.value_=u.map(f=>f.body())}range(t,u){var f=t;return f instanceof Range||(f=Range.range(t,u)),this.value_.push(f.body()),this}}Aggregation.RangeAggregation=RangeAggregation;class Query extends Embodied{static aggregate(t,u,f){return new Query().aggregate(t,u,f)}static count(){return new Query().type('count')}static fetch(){return new Query().type('fetch')}static filter(t,u,f){return new Query().filter(t,u,f)}static offset(t){return new Query().offset(t)}static highlight(t){return new Query().highlight(t)}static limit(t){return new Query().limit(t)}static search(t,u,f){return new Query().search(t,u,f)}static sort(t,u){return new Query().sort(t,u)}static type(t){return new Query().type(t)}aggregate(t,u,f){var g=u;g instanceof Aggregation||(g=Aggregation.field(u,f));var _=g.getField(),k={};return k[_]={name:t,operator:g.getOperator()},isDefAndNotNull(g.getValue())&&(k[_].value=g.getValue()),this.body_.aggregation||(this.body_.aggregation=[]),this.body_.aggregation.push(k),this}count(){return this.type('count')}fetch(){return this.type('fetch')}filter(t,u,f){let g=Filter.toFilter(t,u,f);return this.body_.filter||(this.body_.filter=[]),this.body_.filter.push(g.body()),this}offset(t){return this.body_.offset=t,this}highlight(t){return this.body_.highlight||(this.body_.highlight=[]),this.body_.highlight.push(t),this}limit(t){return this.body_.limit=t,this}search(t,u,f){var g=t;return f?g=Filter.field(t,u,f):u?g=Filter.match(t,u):!(g instanceof Filter)&&(g=Filter.match(t)),this.body_.search||(this.body_.search=[]),isDefAndNotNull(t)?this.body_.search.push(g.body()):this.body_.search.push({}),this}sort(t,u){this.body_.sort||(this.body_.sort=[]);var f={};return f[t]=u||'asc',this.body_.sort.push(f),this}type(t){return this.body_.type=t,this}}class DataApiHelper extends ApiHelper{constructor(t){super(t)}where(t,u,f){return this.getOrCreateFilter_().and(t,u,f),this}or(t,u,f){if(0===this.getOrCreateFilter_().body().and.length)throw Error('It\'s required to have a condition before using an \'or()\' for the first time.');return this.getOrCreateFilter_().or(t,u,f),this}none(t,...u){return this.where(Filter.none(t,u))}match(t,u){return this.where(Filter.match(t,u))}similar(t,u){return this.where(Filter.similar(t,u))}lt(t,u){return this.where(Filter.lt(t,u))}lte(t,u){return this.where(Filter.lte(t,u))}any(t,...u){return this.where(Filter.any(t,u))}boundingBox(t,u,f){return this.where(Filter.boundingBox(t,u,f))}distance(t,u,f){return this.where(Filter.distance(t,u,f))}range(t,u,f){return this.where(Filter.range(t,u,f))}limit(t){return this.getOrCreateQuery_().limit(t),this}offset(t){return this.getOrCreateQuery_().offset(t),this}highlight(t){return this.getOrCreateQuery_().highlight(t),this}aggregate(t,u,f){return this.getOrCreateQuery_().aggregate(t,u,f),this}count(){return this.getOrCreateQuery_().type('count'),this}orderBy(t,u){return this.getOrCreateQuery_().sort(t,u),this}create(t,u){return assertDefAndNotNull(t,'Collection key must be specified.'),assertObject(u,'Data can\'t be empty.'),this.wedeployClient.url(this.wedeployClient.dataUrl_).auth(this.helperAuthScope).path(t).post(u).then(f=>assertResponseSucceeded(f)).then(f=>f.body())}update(t,u){return assertDefAndNotNull(t,'Document key must be specified.'),assertObject(u,'Data must be specified.'),this.wedeployClient.url(this.wedeployClient.dataUrl_).auth(this.helperAuthScope).path(t).put(u).then(f=>assertResponseSucceeded(f)).then(f=>f.body())}delete(t){return assertDefAndNotNull(t,'Document/Field/Collection key must be specified'),this.wedeployClient.url(this.wedeployClient.dataUrl_).auth(this.helperAuthScope).path(t).delete().then(u=>assertResponseSucceeded(u)).then(()=>void 0)}get(t){return assertDefAndNotNull(t,'Document/Field/Collection key must be specified'),this.addFiltersToQuery_(),this.wedeployClient.url(this.wedeployClient.dataUrl_).auth(this.helperAuthScope).path(t).get(this.query_).then(u=>assertResponseSucceeded(u)).then(u=>u.body())}search(t){return assertDefAndNotNull(t,'Document/Field/Collection key must be specified'),this.onSearch_(),this.addFiltersToQuery_(),this.wedeployClient.url(this.wedeployClient.dataUrl_).auth(this.helperAuthScope).path(t).get(this.query_).then(u=>assertResponseSucceeded(u)).then(u=>u.body())}watch(t,u){return assertDefAndNotNull(t,'Collection key must be specified'),this.addFiltersToQuery_(),this.wedeployClient.url(this.wedeployClient.dataUrl_).auth(this.helperAuthScope).path(t).watch(this.query_,u)}getOrCreateFilter_(){return this.filter_||(this.filter_=new Filter),this.filter_}getOrCreateQuery_(){return this.query_||(this.query_=new Query),this.query_}addFiltersToQuery_(){return isDef(this.filter_)&&!0!==this.toSearch_&&this.getOrCreateQuery_().filter(this.filter_),this}onSearch_(){if(isDef(this.filter_))this.getOrCreateQuery_().search(this.getOrCreateFilter_());else throw Error('It\'s required to have a condition before using an \'search()\' for the first time.');return this.toSearch_=!0,this}}class Base64{static encodeString(t){return'function'==typeof btoa?btoa(t):new Buffer(t.toString(),'binary')}}var Thenable=function(){};Thenable.prototype.then=function(){},Thenable.IMPLEMENTED_BY_PROP='$goog_Thenable',Thenable.addImplementation=function(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0},Thenable.isImplementedBy=function(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(u){return!1}};var partial=function(t){var u=Array.prototype.slice.call(arguments,1);return function(){var f=u.slice();return f.push.apply(f,arguments),t.apply(this,f)}},CancellablePromise=function(t,u){this.state_=CancellablePromise.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,0<CancellablePromise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0===CancellablePromise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var f=this;t.call(u,function(g){f.resolve_(CancellablePromise.State_.FULFILLED,g)},function(g){f.resolve_(CancellablePromise.State_.REJECTED,g)})}catch(g){this.resolve_(CancellablePromise.State_.REJECTED,g)}};CancellablePromise.UNHANDLED_REJECTION_DELAY=0,CancellablePromise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},CancellablePromise.CallbackEntry_=null,CancellablePromise.resolve=function(t){return new CancellablePromise(function(u){u(t)})},CancellablePromise.reject=function(t){return new CancellablePromise(function(u,f){f(t)})},CancellablePromise.race=function(t){return new CancellablePromise(function(u,f){t.length||u(void 0);for(var g=0,_;_=t[g];g++)_.then(u,f)})},CancellablePromise.all=function(t){return new CancellablePromise(function(u,f){var g=t.length,_=[];if(!g)return void u(_);var k=function(w,S){g--,_[w]=S,0===g&&u(_)},C=function(w){f(w)};for(var E=0,A;A=t[E];E++)A.then(partial(k,E),C)})},CancellablePromise.firstFulfilled=function(t){return new CancellablePromise(function(u,f){var g=t.length,_=[];if(!g)return void u(void 0);var k=function(w){u(w)},C=function(w,S){g--,_[w]=S,0===g&&f(_)};for(var E=0,A;A=t[E];E++)A.then(k,partial(C,E))})},CancellablePromise.prototype.then=function(t,u,f){return this.addChildPromise_(isFunction(t)?t:null,isFunction(u)?u:null,f)},Thenable.addImplementation(CancellablePromise),CancellablePromise.prototype.thenAlways=function(t,u){var f=function(){try{t.call(u)}catch(g){CancellablePromise.handleRejection_.call(null,g)}};return this.addCallbackEntry_({child:null,onRejected:f,onFulfilled:f}),this},CancellablePromise.prototype.thenCatch=function(t,u){return this.addChildPromise_(null,t,u)},CancellablePromise.prototype.catch=CancellablePromise.prototype.thenCatch,CancellablePromise.prototype.cancel=function(t){this.state_===CancellablePromise.State_.PENDING&&async.run(function(){var u=new CancellablePromise.CancellationError(t);u.IS_CANCELLATION_ERROR=!0,this.cancelInternal_(u)},this)},CancellablePromise.prototype.cancelInternal_=function(t){this.state_===CancellablePromise.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,t):this.resolve_(CancellablePromise.State_.REJECTED,t))},CancellablePromise.prototype.cancelChild_=function(t,u){if(this.callbackEntries_){var f=0,g=-1;for(var _=0,k;k=this.callbackEntries_[_];_++){var C=k.child;if(C&&(f++,C===t&&(g=_),0<=g&&1<f))break}if(0<=g)if(this.state_===CancellablePromise.State_.PENDING&&1==f)this.cancelInternal_(u);else{var E=this.callbackEntries_.splice(g,1)[0];this.executeCallback_(E,CancellablePromise.State_.REJECTED,u)}}},CancellablePromise.prototype.addCallbackEntry_=function(t){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==CancellablePromise.State_.FULFILLED&&this.state_!==CancellablePromise.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(t)},CancellablePromise.prototype.addChildPromise_=function(t,u,f){var g={child:null,onFulfilled:null,onRejected:null};return g.child=new CancellablePromise(function(_,k){g.onFulfilled=t?function(C){try{var E=t.call(f,C);_(E)}catch(A){k(A)}}:_,g.onRejected=u?function(C){try{var E=u.call(f,C);!isDef(E)&&C.IS_CANCELLATION_ERROR?k(C):_(E)}catch(A){k(A)}}:k}),g.child.parent_=this,this.addCallbackEntry_(g),g.child},CancellablePromise.prototype.unblockAndFulfill_=function(t){if(this.state_!==CancellablePromise.State_.BLOCKED)throw new Error('CancellablePromise is not blocked.');this.state_=CancellablePromise.State_.PENDING,this.resolve_(CancellablePromise.State_.FULFILLED,t)},CancellablePromise.prototype.unblockAndReject_=function(t){if(this.state_!==CancellablePromise.State_.BLOCKED)throw new Error('CancellablePromise is not blocked.');this.state_=CancellablePromise.State_.PENDING,this.resolve_(CancellablePromise.State_.REJECTED,t)},CancellablePromise.prototype.resolve_=function(t,u){if(this.state_===CancellablePromise.State_.PENDING){if(this===u)t=CancellablePromise.State_.REJECTED,u=new TypeError('CancellablePromise cannot resolve to itself');else{if(Thenable.isImplementedBy(u))return u=u,this.state_=CancellablePromise.State_.BLOCKED,void u.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(isObject(u))try{var f=u.then;if(isFunction(f))return void this.tryThen_(u,f)}catch(g){t=CancellablePromise.State_.REJECTED,u=g}}this.result_=u,this.state_=t,this.scheduleCallbacks_(),t!==CancellablePromise.State_.REJECTED||u.IS_CANCELLATION_ERROR||CancellablePromise.addUnhandledRejection_(this,u)}},CancellablePromise.prototype.tryThen_=function(t,u){this.state_=CancellablePromise.State_.BLOCKED;var f=this,g=!1,_=function(C){g||(g=!0,f.unblockAndFulfill_(C))},k=function(C){g||(g=!0,f.unblockAndReject_(C))};try{u.call(t,_,k)}catch(C){k(C)}},CancellablePromise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,async.run(this.executeCallbacks_,this))},CancellablePromise.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var t=this.callbackEntries_;this.callbackEntries_=[];for(var u=0;u<t.length;u++)this.executeCallback_(t[u],this.state_,this.result_)}this.executing_=!1},CancellablePromise.prototype.executeCallback_=function(t,u,f){u===CancellablePromise.State_.FULFILLED?t.onFulfilled(f):(this.removeUnhandledRejection_(),t.onRejected(f))},CancellablePromise.prototype.removeUnhandledRejection_=function(){var t;if(0<CancellablePromise.UNHANDLED_REJECTION_DELAY)for(t=this;t&&t.unhandledRejectionId_;t=t.parent_)clearTimeout(t.unhandledRejectionId_),t.unhandledRejectionId_=0;else if(0===CancellablePromise.UNHANDLED_REJECTION_DELAY)for(t=this;t&&t.hadUnhandledRejection_;t=t.parent_)t.hadUnhandledRejection_=!1},CancellablePromise.addUnhandledRejection_=function(t,u){0<CancellablePromise.UNHANDLED_REJECTION_DELAY?t.unhandledRejectionId_=setTimeout(function(){CancellablePromise.handleRejection_.call(null,u)},CancellablePromise.UNHANDLED_REJECTION_DELAY):0===CancellablePromise.UNHANDLED_REJECTION_DELAY&&(t.hadUnhandledRejection_=!0,async.run(function(){t.hadUnhandledRejection_&&CancellablePromise.handleRejection_.call(null,u)}))},CancellablePromise.handleRejection_=async.throwException,CancellablePromise.setUnhandledRejectionHandler=function(t){CancellablePromise.handleRejection_=t},CancellablePromise.CancellationError=class extends Error{constructor(t){super(t),t&&(this.message=t)}},CancellablePromise.CancellationError.prototype.name='cancel';class Ajax{static parseResponseHeaders(t){var u=[];if(!t)return u;var f=t.split('\r\n');for(var g=0;g<f.length;g++){var _=f[g].indexOf(': ');if(0<_){var k=f[g].substring(0,_),C=f[g].substring(_+2);u.push({name:k,value:C})}}return u}static request(t,u,f,g,_,k,C,E){t=t||'',u=u||'GET';var A=new XMLHttpRequest,w=new CancellablePromise(function(T,R){A.onload=function(){return A.aborted?void A.onerror():void T(A)},A.onerror=function(){var P=new Error('Request error');P.request=A,R(P)}}).thenCatch(function(T){throw A.abort(),T}).thenAlways(function(){clearTimeout(S)});if(_&&(t=new Uri(t).addParametersFromMultiMap(_).toString()),A.open(u,t,!C),E&&(A.withCredentials=!0),g&&g.names().forEach(function(T){A.setRequestHeader(T,g.getAll(T).join(', '))}),A.send(isDef(f)?f:null),isDefAndNotNull(k))var S=setTimeout(function(){w.cancel('Request timeout')},k);return w}}class Transport{send(){}}class ClientMessage{constructor(){this.headers_=new MultiMap}body(t){return isDef(t)?(this.body_=t,this):this.body_}header(t,u){if(2!==arguments.length)throw new Error('Invalid arguments');return this.headers_.set(t,u),this}headers(t){return isDef(t)?(t instanceof MultiMap?this.headers_=t:this.headers_.values=t,t):this.headers_}removeBody(){this.body_=void 0}}class ClientResponse extends ClientMessage{constructor(t){if(super(),!t)throw new Error('Can\'t create response without request');this.clientRequest_=t}request(){return this.clientRequest_}statusCode(t){return isDef(t)?(this.statusCode_=t,this):this.statusCode_}statusText(t){return isDef(t)?(this.statusText_=t,this):this.statusText_}succeeded(){return 200<=this.statusCode()&&399>=this.statusCode()}}class AjaxTransport extends Transport{send(t){var u=Ajax.request(t.url(),t.method(),t.body(),t.headers(),t.params(),null,!1,t.withCredentials());return u.then(function(f){var g=new ClientResponse(t);return g.body(f.responseText),g.statusCode(f.status),g.statusText(f.statusText),Ajax.parseResponseHeaders(f.getAllResponseHeaders()).forEach(function(_){g.header(_.name,_.value)}),g})}}class TransportFactory{constructor(){this.transports={},this.transports[TransportFactory.DEFAULT_TRANSPORT_NAME]=TransportFactory[TransportFactory.DEFAULT_TRANSPORT_NAME]}static instance(){return TransportFactory.instance_||(TransportFactory.instance_=new TransportFactory),TransportFactory.instance_}get(t){var u=this.transports[t];if(!u)throw new Error('Invalid transport name: '+t);try{return new u}catch(f){throw new Error('Can\'t create transport',f)}}getDefault(){return this.get(TransportFactory.DEFAULT_TRANSPORT_NAME)}}TransportFactory.DEFAULT_TRANSPORT_NAME='default',TransportFactory[TransportFactory.DEFAULT_TRANSPORT_NAME]=AjaxTransport;class ClientRequest extends ClientMessage{constructor(){super(),this.params_=new MultiMap,this.withCredentials_=!0}withCredentials(t){return isDef(t)?(this.withCredentials_=!!t,this):this.withCredentials_}method(t){return isDef(t)?(this.method_=t,this):this.method_||ClientRequest.DEFAULT_METHOD}param(t,u){if(2!==arguments.length)throw new Error('Invalid arguments');return this.params_.set(t,u),this}params(t){return isDef(t)?(t instanceof MultiMap?this.params_=t:this.params_.values=t,t):this.params_}url(t){return isDef(t)?(this.url_=t,this):this.url_}}ClientRequest.DEFAULT_METHOD='GET';var io;'undefined'!=typeof globals.window&&(io=globals.window.io);class WeDeploy$1{constructor(t,...u){if(0===arguments.length)throw new Error('Invalid arguments, try `new WeDeploy(baseUrl, url)`');this.auth_=null,this.body_=null,this.url_=Uri.joinPaths(t||'',...u),this.headers_=new MultiMap,this.params_=new MultiMap,this.withCredentials_=!0,this.header('Content-Type','application/json'),this.header('X-Requested-With','XMLHttpRequest')}static data(t){assertUriWithNoPath(t,'The data url should not have a path'),isString(t)&&(WeDeploy$1.dataUrl_=t);let u=new DataApiHelper(WeDeploy$1);return u.auth(WeDeploy$1.auth().currentUser),u}auth(t,u){return this.auth_=t,this.auth_ instanceof Auth||(this.auth_=Auth.create(t,u)),this}static auth(t){return isString(t)&&(WeDeploy$1.authUrl_=t),WeDeploy$1.auth_||(WeDeploy$1.auth_=new AuthApiHelper(WeDeploy$1)),WeDeploy$1.auth_}body(t){return this.body_=t,this}convertBodyToParams_(t,u){isString(u)?u={body:u}:u instanceof Embodied&&(u=u.body()),Object.keys(u||{}).forEach(f=>t.param(f,u[f]))}createClientRequest_(t,u){const f=new ClientRequest;return f.body(u||this.body_),!isDefAndNotNull(f.body())&&this.formData_&&f.body(this.formData_),f.method(t),f.headers(this.headers()),f.params(this.params()),f.url(this.url()),f.withCredentials(this.withCredentials_),this.encode(f),f}decode(t){if(WeDeploy$1.isContentTypeJson(t))try{t.body(JSON.parse(t.body()))}catch(u){}return t}delete(t){return this.sendAsync('DELETE',t)}encode(t){let u=t.body();return isElement(u)&&(u=new FormData(u),t.body(u)),u=this.maybeWrapWithQuery_(u),'GET'===t.method()&&(this.convertBodyToParams_(t,u),t.removeBody(),u=null),'undefined'!=typeof FormData&&u instanceof FormData?t.headers().remove('content-type'):u instanceof Embodied?t.body(u.toString()):WeDeploy$1.isContentTypeJson(t)&&t.body(JSON.stringify(t.body())),this.encodeParams_(t),this.resolveAuthentication_(t),t}encodeParams_(t){let u=t.params();u.names().forEach(function(f){let g=u.getAll(f);g.forEach(function(_,k){_ instanceof Embodied?_=_.toString():(isObject(_)||_ instanceof Array)&&(_=JSON.stringify(_)),g[k]=_})})}form(t,u){if('undefined'==typeof FormData)throw new Error('form() is only available when FormData API is available.');return this.formData_||(this.formData_=new FormData),this.formData_.append(t,u),this}get(t){return this.sendAsync('GET',t)}header(t,u){if(2!==arguments.length)throw new Error('Invalid arguments');return this.headers_.set(t,u),this}headers(){return this.headers_}maybeWrapWithQuery_(t){return t instanceof Filter&&(t=Query.filter(t)),t}param(t,u){if(2!==arguments.length)throw new Error('Invalid arguments');return this.params_.set(t,u),this}params(){return this.params_}patch(t){return this.sendAsync('PATCH',t)}path(...t){let u=new WeDeploy$1(this.url(),...t);return isDefAndNotNull(this.auth_)&&u.auth(this.auth_),u.use(this.customTransport_)}post(t){return this.sendAsync('POST',t)}put(t){return this.sendAsync('PUT',t)}resolveAuthentication_(t){if(this.auth_)if(this.auth_.hasToken())t.header('Authorization','Bearer '+this.auth_.token);else{const u=this.auth_.email+':'+this.auth_.password;t.header('Authorization','Basic '+Base64.encodeString(u))}}sendAsync(t,u){const f=this.customTransport_||TransportFactory.instance().getDefault(),g=this.createClientRequest_(t,u);return f.send(g).then(this.decode)}static socket(t){io=t}static url(t){return new WeDeploy$1(t).use(this.customTransport_)}url(){return this.url_}use(t){return this.customTransport_=t,this}watch(t,u){if('undefined'==typeof io)throw new Error('Socket.io client not loaded');const f=this.createClientRequest_('GET',t),g=new Uri(f.url());return g.addParametersFromMultiMap(f.params()),u=u||{forceNew:!0},u.query='url='+encodeURIComponent(g.getPathname()+g.getSearch()),u.path=u.path||g.getPathname(),io(g.getHost(),u)}withCredentials(t){return this.withCredentials_=!!t,this}}WeDeploy$1.isContentTypeJson=function(t){const u=t.headers().get('content-type')||'';return 0===u.indexOf('application/json')},WeDeploy$1.auth_=null,WeDeploy$1.authUrl_='',WeDeploy$1.data_=null,WeDeploy$1.dataUrl_='',globals.window.Filter=Filter,globals.window.Geo=Geo,globals.window.Query=Query,globals.window.Range=Range,globals.window.WeDeploy=WeDeploy$1;export{Filter,Geo,Query,Range,WeDeploy$1 as WeDeploy};export default WeDeploy$1;