(function(){this.wedeploy=this.wedeploy||{},this.wedeployNamed=this.wedeployNamed||{};var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},t.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},t.slicedToArray=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t.toConsumableArray=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.abstractMethod=function(){throw Error("Unimplemented abstract method")},e.collectSuperClassesProperty=function(t,e){for(var n=[t[e]];t.__proto__&&!t.__proto__.isPrototypeOf(Function);)t=t.__proto__,n.push(t[e]);return n},e.getFunctionName=function(t){if(!t.name){var e=t.toString();t.name=e.substring(9,e.indexOf("("))}return t.name},e.getUid=function(t,n){if(t){var r=t[e.UID_PROPERTY];return n&&!t.hasOwnProperty(e.UID_PROPERTY)&&(r=null),r||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++)}return e.uniqueIdCounter_++},e.identityFunction=function(t){return t},e.isBoolean=function(t){return"boolean"==typeof t},e.isDef=function(t){return void 0!==t},e.isDefAndNotNull=function(t){return e.isDef(t)&&!e.isNull(t)},e.isDocument=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&9===e.nodeType},e.isElement=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&1===e.nodeType},e.isFunction=function(t){return"function"==typeof t},e.isNull=function(t){return null===t},e.isNumber=function(t){return"number"==typeof t},e.isWindow=function(t){return null!==t&&t===t.window},e.isObject=function(e){var n="undefined"==typeof e?"undefined":t["typeof"](e);return"object"===n&&null!==e||"function"===n},e.isPromise=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&"function"==typeof e.then},e.isString=function(t){return"string"==typeof t||t instanceof String},e.mergeSuperClassesProperty=function(t,n,r){var o=n+"_MERGED";if(t.hasOwnProperty(o))return!1;var i=e.collectSuperClassesProperty(t,n);return r&&(i=r(i)),t[o]=i,!0},e.nullFunction=function(){},e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.wedeploy.core=e}.call(this),function(){var e=this.wedeploy.core,n=function(){function n(){t.classCallCheck(this,n)}return n.equal=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},n.firstDefinedValue=function(t){for(var e=0;e<t.length;e++)if(void 0!==t[e])return t[e]},n.flatten=function(t,e){for(var r=e||[],o=0;o<t.length;o++)Array.isArray(t[o])?n.flatten(t[o],r):r.push(t[o]);return r},n.remove=function(t,e){var r,o=t.indexOf(e);return(r=o>=0)&&n.removeAt(t,o),r},n.removeAt=function(t,e){return 1===Array.prototype.splice.call(t,e,1).length},n.slice=function(t,n,r){for(var o=[],i=e.isDef(r)?r:t.length,s=n;s<i;s++)o.push(t[s]);return o},n}();this.wedeploy.array=n}.call(this),function(){var t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var r=e[n];try{r.fn.call(r.scope)}catch(o){t.throwException(o)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(t,e){this.fn=t,this.scope=e},t.nextTick=function(e,n){var r=e;return n&&(r=e.bind(n)),r=t.nextTick.wrapCallback_(r),"function"==typeof setImmediate?void setImmediate(r):(t.nextTick.setImmediate_||(t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),void t.nextTick.setImmediate_(r))},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var t;if("function"==typeof MessageChannel&&(t=MessageChannel),"undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(t=function(){var t=document.createElement("iframe");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow,n=e.document;n.open(),n.write(""),n.close();var r="callImmediate"+Math.random(),o=e.location.protocol+"//"+e.location.host,i=function(t){t.origin!==o&&t.data!==r||this.port1.onmessage()}.bind(this);e.addEventListener("message",i,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(r,o)}}}),"undefined"!=typeof t){var e=new t,n={},r=n;return e.port1.onmessage=function(){n=n.next;var t=n.cb;n.cb=null,t()},function(t){r.next={cb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){setTimeout(t,0)}},t.nextTick.wrapCallback_=function(t){return t},this.wedeploy.async=t}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e),this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)},e.prototype.disposeInternal=function(){},e.prototype.isDisposed=function(){return this.disposed_},e}();this.wedeploy.Disposable=e}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.mixin=function(t){for(var e,n,r=1;r<arguments.length;r++){n=arguments[r];for(e in n)t[e]=n[e]}return t},e.getObjectByName=function(t,e){var n=e||window,r=t.split(".");return r.reduce(function(t,e){return t[e]},n)},e.map=function(t,e){for(var n={},r=Object.keys(t),o=0;o<r.length;o++)n[r[o]]=e(r[o],t[r[o]]);return n},e.shallowEqual=function(t,e){if(t===e)return!0;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(t[n[o]]!==e[n[o]])return!1;return!0},e}();this.wedeploy.object=e}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},e.escapeRegex=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},e.getRandomString=function(){var t=2147483648;return Math.floor(Math.random()*t).toString(36)+Math.abs(Math.floor(Math.random()*t)^Date.now()).toString(36)},e.hashCode=function(t){for(var e=0,n=0,r=t.length;n<r;n++)e=31*e+t.charCodeAt(n),e%=4294967296;return e},e.replaceInterval=function(t,e,n,r){return t.substring(0,e)+r+t.substring(n)},e}();this.wedeploy.string=e}.call(this),function(){var t=this.wedeploy.core,e=this.wedeploy.array,n=this.wedeploy.async,r=this.wedeploy.Disposable,o=this.wedeploy.object,i=this.wedeploy.string;this.wedeploy.metal=t,this.wedeployNamed.metal=this.wedeployNamed.metal||{},this.wedeployNamed.metal.core=t,this.wedeployNamed.metal.array=e,this.wedeployNamed.metal.async=n,this.wedeployNamed.metal.Disposable=r,this.wedeployNamed.metal.object=o,this.wedeployNamed.metal.string=i}.call(this),function(){var e=this.wedeployNamed.metal.Disposable,n=Object.create,r=function(e){function r(){t.classCallCheck(this,r);var o=t.possibleConstructorReturn(this,e.call(this));return o.keys=n(null),o.values=n(null),o}return t.inherits(r,e),r.prototype.add=function(t,e){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=this.values[t.toLowerCase()]||[],this.values[t.toLowerCase()].push(e),this},r.prototype.clear=function(){return this.keys=n(null),this.values=n(null),this},r.prototype.contains=function(t){return t.toLowerCase()in this.values},r.prototype.disposeInternal=function(){this.values=null},r.prototype.get=function(t){var e=this.values[t.toLowerCase()];if(e)return e[0]},r.prototype.getAll=function(t){return this.values[t.toLowerCase()]},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.names=function(){var t=this;return Object.keys(this.values).map(function(e){return t.keys[e]})},r.prototype.remove=function(t){return delete this.keys[t.toLowerCase()],delete this.values[t.toLowerCase()],this},r.prototype.set=function(t,e){return this.keys[t.toLowerCase()]=t,this.values[t.toLowerCase()]=[e],this},r.prototype.size=function(){return this.names().length},r.prototype.toString=function(){return JSON.stringify(this.values)},r}(e);this.wedeploy.MultiMap=r}.call(this),function(){var e=this.wedeployNamed.metal.array,n=function(){function n(e){t.classCallCheck(this,n),this.value_=e,this.parent_=null,this.children_=null}return n.prototype.addChild=function(t){r(t),t.setParent(this),this.children_=this.children_||[],this.children_.push(t)},n.prototype.contains=function(t){for(var e=t.getParent();e;){if(e===this)return!0;e=e.getParent()}return!1},n.prototype.getAncestors=function(){for(var t=[],e=this.getParent();e;)t.push(e),e=e.getParent();return t},n.prototype.getChildAt=function(t){return this.getChildren()[t]||null},n.prototype.getChildren=function(){return this.children_||n.EMPTY_ARRAY},n.prototype.getChildCount=function(){return this.getChildren().length},n.prototype.getDepth=function(){for(var t=0,e=this;e.getParent();)t++,e=e.getParent();return t},n.prototype.getParent=function(){return this.parent_},n.prototype.getRoot=function(){for(var t=this;t.getParent();)t=t.getParent();return t},n.prototype.getValue=function(){return this.value_},n.prototype.isLeaf=function(){return!this.getChildCount()},n.prototype.removeChild=function(t){return e.remove(this.getChildren(),t)?t:null},n.prototype.setParent=function(t){this.parent_=t},n.prototype.traverse=function(t,e){t&&t(this),this.getChildren().forEach(function(n){return n.traverse(t,e)}),e&&e(this)},n}();n.EMPTY_ARRAY=[];var r=function(t){if(t.getParent())throw new Error("Cannot add child with parent.")};this.wedeploy.TreeNode=n}.call(this),function(){var t=this.wedeploy.MultiMap,e=this.wedeploy.TreeNode;this.wedeployNamed.structs=this.wedeployNamed.structs||{},this.wedeployNamed.structs.MultiMap=t,this.wedeployNamed.structs.TreeNode=e}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeployNamed.structs.MultiMap,r=function(){function r(){t.classCallCheck(this,r),this.headers_=new n}return r.prototype.body=function(t){return e.isDef(t)?(this.body_=t,this):this.body_},r.prototype.header=function(t,e){if(2!==arguments.length)throw new Error("Invalid arguments");return this.headers_.set(t,e),this},r.prototype.headers=function(t){return e.isDef(t)?(t instanceof n?this.headers_=t:this.headers_.values=t,t):this.headers_},r.prototype.removeBody=function(){this.body_=void 0},r}();this.wedeploy.ClientMessage=r}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.ClientMessage,r=this.wedeployNamed.structs.MultiMap,o=function(n){function o(){t.classCallCheck(this,o);var e=t.possibleConstructorReturn(this,n.call(this));return e.params_=new r,e}return t.inherits(o,n),o.prototype.method=function(t){return e.isDef(t)?(this.method_=t,this):this.method_||o.DEFAULT_METHOD},o.prototype.param=function(t,e){if(2!==arguments.length)throw new Error("Invalid arguments");return this.params_.set(t,e),this},o.prototype.params=function(t){return e.isDef(t)?(t instanceof r?this.params_=t:this.params_.values=t,t):this.params_},o.prototype.url=function(t){return e.isDef(t)?(this.url_=t,this):this.url_},o}(n);o.DEFAULT_METHOD="GET",this.wedeploy.ClientRequest=o}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.ClientMessage,r=function(n){function r(e){t.classCallCheck(this,r);var o=t.possibleConstructorReturn(this,n.call(this));if(!e)throw new Error("Can't create response without request");return o.clientRequest_=e,o}return t.inherits(r,n),r.prototype.request=function(){return this.clientRequest_},r.prototype.statusCode=function(t){return e.isDef(t)?(this.statusCode_=t,this):this.statusCode_},r.prototype.statusText=function(t){return e.isDef(t)?(this.statusText_=t,this):this.statusText_},r.prototype.succeeded=function(){return this.statusCode()>=200&&this.statusCode()<=399},r}(n);this.wedeploy.ClientResponse=r}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.prototype.send=function(){},e}();this.wedeploy.Transport=e}.call(this),function(){function t(t){var e=document.createElement("a");return e.href=t,{hash:e.hash,hostname:e.hostname,password:e.password,pathname:"/"===e.pathname[0]?e.pathname:"/"+e.pathname,port:e.port,protocol:e.protocol,search:e.search,username:e.username}}this.wedeploy.parseFromAnchor=t}.call(this),function(){function t(t){return e.isFunction(URL)&&URL.length?new URL(t):n(t)}var e=this.wedeployNamed.metal.core,n=this.wedeploy.parseFromAnchor;this.wedeploy.parse=t}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeployNamed.metal.string,r=this.wedeploy.parse,o=this.wedeployNamed.structs.MultiMap,i=r,s=function(){function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];t.classCallCheck(this,r),this.url=r.parse(this.maybeAddProtocolAndHostname_(e))}return r.prototype.addParametersFromMultiMap=function(t){var e=this;return t.names().forEach(function(n){t.getAll(n).forEach(function(t){e.addParameterValue(n,t)})}),this},r.prototype.addParameterValue=function(t,n){return this.ensureQueryInitialized_(),e.isDef(n)&&(n=String(n)),this.query.add(t,n),this},r.prototype.addParameterValues=function(t,e){var n=this;return e.forEach(function(e){return n.addParameterValue(t,e)}),this},r.prototype.ensureQueryInitialized_=function(){var n=this;if(!this.query){this.query=new o;var i=this.url.search;i&&i.substring(1).split("&").forEach(function(o){var i=o.split("="),s=t.slicedToArray(i,2),a=s[0],u=s[1];e.isDef(u)&&(u=r.urlDecode(u)),n.addParameterValue(a,u)})}},r.prototype.getHash=function(){return this.url.hash||""},r.prototype.getHost=function(){var t=this.getHostname();if(t){var e=this.getPort();e&&"80"!==e&&(t+=":"+e)}return t},r.prototype.getHostname=function(){var t=this.url.hostname;return t===r.HOSTNAME_PLACEHOLDER?"":t},r.prototype.getOrigin=function(){var t=this.getHost();return t?this.getProtocol()+"//"+t:""},r.prototype.getParameterValue=function(t){return this.ensureQueryInitialized_(),this.query.get(t)},r.prototype.getParameterValues=function(t){return this.ensureQueryInitialized_(),this.query.getAll(t)},r.prototype.getParameterNames=function(){return this.ensureQueryInitialized_(),this.query.names()},r.getParseFn=function(){return i},r.prototype.getPathname=function(){return this.url.pathname},r.prototype.getPort=function(){return this.url.port},r.prototype.getProtocol=function(){return this.url.protocol},r.prototype.getSearch=function(){var t=this,n="",r="";return this.getParameterNames().forEach(function(n){t.getParameterValues(n).forEach(function(t){r+=n,e.isDef(t)&&(r+="="+encodeURIComponent(t)),r+="&"})}),r=r.slice(0,-1),r&&(n+="?"+r),n},r.prototype.hasParameter=function(t){return this.ensureQueryInitialized_(),this.query.contains(t)},r.prototype.makeUnique=function(){return this.setParameterValue(r.RANDOM_PARAM,n.getRandomString()),this},r.prototype.maybeAddProtocolAndHostname_=function(t){var e=t;if(t.indexOf("://")===-1&&0!==t.indexOf("javascript:"))switch(e=r.DEFAULT_PROTOCOL,"/"===t[0]&&"/"===t[1]||(e+="//"),t.charAt(0)){case".":case"?":case"#":e+=r.HOSTNAME_PLACEHOLDER,e+="/",e+=t;break;case"":case"/":"/"!==t[1]&&(e+=r.HOSTNAME_PLACEHOLDER),e+=t;break;default:e+=t}return e},r.normalizeObject=function(t){var e=t.pathname?t.pathname.length:0;return e>1&&"/"===t.pathname[e-1]&&(t.pathname=t.pathname.substr(0,e-1)),t},r.parse=function(t){return r.normalizeObject(i(t))},r.prototype.removeParameter=function(t){return this.ensureQueryInitialized_(),this.query.remove(t),this},r.prototype.removeUnique=function(){return this.removeParameter(r.RANDOM_PARAM),this},r.prototype.setHash=function(t){return this.url.hash=t,this},r.prototype.setHostname=function(t){return this.url.hostname=t,this},r.prototype.setParameterValue=function(t,e){return this.removeParameter(t),this.addParameterValue(t,e),this},r.prototype.setParameterValues=function(t,e){var n=this;return this.removeParameter(t),e.forEach(function(e){return n.addParameterValue(t,e)}),this},r.prototype.setPathname=function(t){return this.url.pathname=t,this},r.prototype.setPort=function(t){return this.url.port=t,this},r.setParseFn=function(t){i=t},r.prototype.setProtocol=function(t){return this.url.protocol=t,":"!==this.url.protocol[this.url.protocol.length-1]&&(this.url.protocol+=":"),this},r.prototype.toString=function(){var t="",e=this.getHost();return e&&(t+=this.getProtocol()+"//"),t+=e+this.getPathname()+this.getSearch()+this.getHash()},r.joinPaths=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),n=n.map(function(t){return"/"===t.charAt(0)?t.substring(1):t}),[t].concat(n).join("/").replace(/\/$/,"")},r.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},r}();s.DEFAULT_PROTOCOL="http:",s.HOSTNAME_PLACEHOLDER="hostname"+Date.now(),s.RANDOM_PARAM="zx",this.wedeploy.Uri=s}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeployNamed.metal.async,r=function(){};r.prototype.then=function(){},r.IMPLEMENTED_BY_PROP="$goog_Thenable",r.addImplementation=function(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0},r.isImplementedBy=function(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}};var o=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}},i=function s(t,e){this.state_=s.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,s.UNHANDLED_REJECTION_DELAY>0?this.unhandledRejectionId_=0:0===s.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var n=this;t.call(e,function(t){n.resolve_(s.State_.FULFILLED,t)},function(t){n.resolve_(s.State_.REJECTED,t)})}catch(r){this.resolve_(s.State_.REJECTED,r)}};i.UNHANDLED_REJECTION_DELAY=0,i.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},i.CallbackEntry_=null,i.resolve=function(t){return new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.length||e(void 0);for(var r,o=0;r=t[o];o++)r.then(e,n)})},i.all=function(t){return new i(function(e,n){var r=t.length,i=[];if(!r)return void e(i);for(var s,a=function(t,n){r--,i[t]=n,0===r&&e(i)},u=function(t){n(t)},l=0;s=t[l];l++)s.then(o(a,l),u)})},i.firstFulfilled=function(t){return new i(function(e,n){var r=t.length,i=[];if(!r)return void e(void 0);for(var s,a=function(t){e(t)},u=function(t,e){r--,i[t]=e,0===r&&n(i)},l=0;s=t[l];l++)s.then(a,o(u,l))})},i.prototype.then=function(t,n,r){return this.addChildPromise_(e.isFunction(t)?t:null,e.isFunction(n)?n:null,r)},r.addImplementation(i),i.prototype.thenAlways=function(t,e){var n=function(){try{t.call(e)}catch(n){i.handleRejection_.call(null,n)}};return this.addCallbackEntry_({child:null,onRejected:n,onFulfilled:n}),this},i.prototype.thenCatch=function(t,e){return this.addChildPromise_(null,t,e)},i.prototype["catch"]=i.prototype.thenCatch,i.prototype.cancel=function(t){this.state_===i.State_.PENDING&&n.run(function(){var e=new i.CancellationError(t);e.IS_CANCELLATION_ERROR=!0,this.cancelInternal_(e)},this)},i.prototype.cancelInternal_=function(t){this.state_===i.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,t):this.resolve_(i.State_.REJECTED,t))},i.prototype.cancelChild_=function(t,e){if(this.callbackEntries_){for(var n,r=0,o=-1,s=0;n=this.callbackEntries_[s];s++){var a=n.child;if(a&&(r++,a===t&&(o=s),o>=0&&r>1))break}if(o>=0)if(this.state_===i.State_.PENDING&&1===r)this.cancelInternal_(e);else{var u=this.callbackEntries_.splice(o,1)[0];this.executeCallback_(u,i.State_.REJECTED,e)}}},i.prototype.addCallbackEntry_=function(t){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==i.State_.FULFILLED&&this.state_!==i.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(t)},i.prototype.addChildPromise_=function(t,n,r){var o={child:null,onFulfilled:null,onRejected:null};return o.child=new i(function(i,s){o.onFulfilled=t?function(e){try{var n=t.call(r,e);i(n)}catch(o){s(o)}}:i,o.onRejected=n?function(t){try{var o=n.call(r,t);!e.isDef(o)&&t.IS_CANCELLATION_ERROR?s(t):i(o)}catch(a){s(a)}}:s}),o.child.parent_=this,this.addCallbackEntry_(o),o.child},i.prototype.unblockAndFulfill_=function(t){if(this.state_!==i.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=i.State_.PENDING,this.resolve_(i.State_.FULFILLED,t)},i.prototype.unblockAndReject_=function(t){if(this.state_!==i.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=i.State_.PENDING,this.resolve_(i.State_.REJECTED,t)},i.prototype.resolve_=function(t,n){if(this.state_===i.State_.PENDING){if(this===n)t=i.State_.REJECTED,n=new TypeError("CancellablePromise cannot resolve to itself");else{if(r.isImplementedBy(n))return n=n,this.state_=i.State_.BLOCKED,void n.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(e.isObject(n))try{var o=n.then;if(e.isFunction(o))return void this.tryThen_(n,o)}catch(s){t=i.State_.REJECTED,n=s}}this.result_=n,this.state_=t,this.scheduleCallbacks_(),t!==i.State_.REJECTED||n.IS_CANCELLATION_ERROR||i.addUnhandledRejection_(this,n)}},i.prototype.tryThen_=function(t,e){this.state_=i.State_.BLOCKED;var n=this,r=!1,o=function(t){r||(r=!0,n.unblockAndFulfill_(t))},s=function(t){r||(r=!0,n.unblockAndReject_(t))};try{e.call(t,o,s)}catch(a){s(a)}},i.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,n.run(this.executeCallbacks_,this))},i.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var t=this.callbackEntries_;this.callbackEntries_=[];for(var e=0;e<t.length;e++)this.executeCallback_(t[e],this.state_,this.result_)}this.executing_=!1},i.prototype.executeCallback_=function(t,e,n){e===i.State_.FULFILLED?t.onFulfilled(n):(this.removeUnhandledRejection_(),t.onRejected(n))},i.prototype.removeUnhandledRejection_=function(){var t;if(i.UNHANDLED_REJECTION_DELAY>0)for(t=this;t&&t.unhandledRejectionId_;t=t.parent_)clearTimeout(t.unhandledRejectionId_),t.unhandledRejectionId_=0;else if(0===i.UNHANDLED_REJECTION_DELAY)for(t=this;t&&t.hadUnhandledRejection_;t=t.parent_)t.hadUnhandledRejection_=!1},i.addUnhandledRejection_=function(t,e){i.UNHANDLED_REJECTION_DELAY>0?t.unhandledRejectionId_=setTimeout(function(){i.handleRejection_.call(null,e)},i.UNHANDLED_REJECTION_DELAY):0===i.UNHANDLED_REJECTION_DELAY&&(t.hadUnhandledRejection_=!0,n.run(function(){t.hadUnhandledRejection_&&i.handleRejection_.call(null,e)}))},i.handleRejection_=n.throwException,i.setUnhandledRejectionHandler=function(t){i.handleRejection_=t},i.CancellationError=function(e){function n(r){t.classCallCheck(this,n);var o=t.possibleConstructorReturn(this,e.call(this,r));return r&&(o.message=r),o}return t.inherits(n,e),n}(Error),i.CancellationError.prototype.name="cancel",this.wedeployNamed.Promise=this.wedeployNamed.Promise||{},this.wedeployNamed.Promise.CancellablePromise=i,this.wedeploy.Promise=i}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.Uri,r=this.wedeployNamed.Promise.CancellablePromise,o=function(){function o(){t.classCallCheck(this,o)}return o.parseResponseHeaders=function(t){var e=[];if(!t)return e;for(var n=t.split("\r\n"),r=0;r<n.length;r++){var o=n[r].indexOf(": ");if(o>0){var i=n[r].substring(0,o),s=n[r].substring(o+2);e.push({name:i,value:s})}}return e},o.request=function i(t,o,s,a,u,l,c,h){t=t||"",o=o||"GET";var i=new XMLHttpRequest,p=new r(function(t,e){i.onload=function(){return i.aborted?void i.onerror():void t(i)},i.onerror=function(){var t=new Error("Request error");t.request=i,e(t)}}).thenCatch(function(t){throw i.abort(),t}).thenAlways(function(){clearTimeout(d)});if(u&&(t=new n(t).addParametersFromMultiMap(u).toString()),i.open(o,t,!c),h&&(i.withCredentials=!0),a&&a.names().forEach(function(t){i.setRequestHeader(t,a.getAll(t).join(", "))}),i.send(e.isDef(s)?s:null),e.isDefAndNotNull(l))var d=setTimeout(function(){p.cancel("Request timeout")},l);return p},o}();this.wedeploy.Ajax=o}.call(this),function(){var e=this.wedeploy.Ajax,n=this.wedeploy.Transport,r=this.wedeploy.ClientResponse,o=function(n){function o(){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(o,n),o.prototype.send=function(t){var n=e.request(t.url(),t.method(),t.body(),t.headers(),t.params(),null,!1,!0);return n.then(function(n){var o=new r(t);return o.body(n.responseText),o.statusCode(n.status),o.statusText(n.statusText),e.parseResponseHeaders(n.getAllResponseHeaders()).forEach(function(t){o.header(t.name,t.value)}),o})},o}(n);this.wedeploy.AjaxTransport=o}.call(this),function(){var e=this.wedeploy.AjaxTransport,n=function(){function e(){t.classCallCheck(this,e),this.transports={},this.transports[e.DEFAULT_TRANSPORT_NAME]=e[e.DEFAULT_TRANSPORT_NAME]}return e.instance=function(){return e.instance_||(e.instance_=new e),e.instance_},e.prototype.get=function(t){var e=this.transports[t];if(!e)throw new Error("Invalid transport name: "+t);try{return new e}catch(n){throw new Error("Can't create transport",n)}},e.prototype.getDefault=function(){return this.get(e.DEFAULT_TRANSPORT_NAME)},e}();n.DEFAULT_TRANSPORT_NAME="default",n[n.DEFAULT_TRANSPORT_NAME]=e,this.wedeploy.TransportFactory=n}.call(this),function(){var t={};"undefined"!=typeof window&&(t.window=window),"undefined"!=typeof document&&(t.document=document),this.wedeploy.globals=t}.call(this),function(){function t(){if(!a.window)throw new Error("Sign-in type not supported in this environment")}function e(t,e){if(!s.isDefAndNotNull(t))throw new Error(e)}function n(t,e){if(!s.isFunction(t))throw new Error(e)}function r(t,e){if(!s.isObject(t))throw new Error(e)}function o(t){if(!t.succeeded())throw t.body();return t}function i(t){if(!s.isDefAndNotNull(t))throw new Error("You must be signed-in to perform this operation")}var s=this.wedeployNamed.metal.core,a=this.wedeploy.globals;this.wedeployNamed.assertions=this.wedeployNamed.assertions||{},this.wedeployNamed.assertions.assertBrowserEnvironment=t,this.wedeployNamed.assertions.assertDefAndNotNull=e,this.wedeployNamed.assertions.assertFunction=n,this.wedeployNamed.assertions.assertObject=r,this.wedeployNamed.assertions.assertResponseSucceeded=o,this.wedeployNamed.assertions.assertUserSignedIn=i}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeployNamed.assertions.assertDefAndNotNull,r=this.wedeployNamed.assertions.assertObject,o=this.wedeployNamed.assertions.assertResponseSucceeded,i=function(){function i(n){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1];t.classCallCheck(this,i),this.token=e.isString(r)?null:n,this.email=e.isString(r)?n:null,this.password=r,this.createdAt=null,this.id=null,this.name=null,this.photoUrl=null,this.wedeployClient=null}return i.create=function(t,e){return new i(t,e)},i.prototype.getCreatedAt=function(){return this.createdAt},i.prototype.getEmail=function(){return this.email},i.prototype.getId=function(){return this.id},i.prototype.getName=function(){return this.name},i.prototype.getPassword=function(){return this.password},i.prototype.getPhotoUrl=function(){return this.photoUrl},i.prototype.getToken=function(){return this.token},i.prototype.hasCreatedAt=function(){return e.isDefAndNotNull(this.createdAt)},i.prototype.hasEmail=function(){return e.isDefAndNotNull(this.email)},i.prototype.hasId=function(){return e.isDefAndNotNull(this.id)},i.prototype.hasName=function(){return e.isDefAndNotNull(this.name)},i.prototype.hasPassword=function(){return e.isDefAndNotNull(this.password)},i.prototype.hasPhotoUrl=function(){return e.isDefAndNotNull(this.photoUrl)},i.prototype.hasToken=function(){return e.isDefAndNotNull(this.token)},i.prototype.setCreatedAt=function(t){this.createdAt=t},i.prototype.setEmail=function(t){this.email=t},i.prototype.setId=function(t){this.id=t},i.prototype.setName=function(t){this.name=t},i.prototype.setPassword=function(t){this.password=t},i.prototype.setPhotoUrl=function(t){this.photoUrl=t},i.prototype.setToken=function(t){this.token=t},i.prototype.setWedeployClient=function(t){this.wedeployClient=t},i.prototype.updateUser=function(t){return r(t,"User data must be specified as object"),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/users").auth(this).patch(t).then(function(t){return o(t)})},i.prototype.deleteUser=function(){return n(this.id,"Cannot delete user without id"),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/users",this.id).auth(this)["delete"]().then(function(t){return o(t)})},i}();this.wedeploy.Auth=i}.call(this),function(){function e(t,e){if(n.isDefAndNotNull(t)&&!n.isString(t))throw new Error(e)}var n=this.wedeployNamed.metal.core,r=this.wedeploy.Uri,o=function(){function o(){t.classCallCheck(this,o),this.provider=null,this.providerScope=null,this.redirectUri=null,this.scope=null}return o.prototype.hasProvider=function(){return n.isDefAndNotNull(this.provider)},o.prototype.hasProviderScope=function(){return n.isDefAndNotNull(this.providerScope)},o.prototype.hasRedirectUri=function(){return n.isDefAndNotNull(this.redirectUri)},o.prototype.hasScope=function(){return n.isDefAndNotNull(this.scope)},o.prototype.makeAuthorizationUrl=function(t){var e=new r(t);return e.setPathname("/oauth/authorize"),this.hasProvider()&&e.setParameterValue("provider",this.getProvider()),this.hasProviderScope()&&e.setParameterValue("provider_scope",this.getProviderScope()),this.hasRedirectUri()&&e.setParameterValue("redirect_uri",this.getRedirectUri()),this.hasScope()&&e.setParameterValue("scope",this.getScope()),e.toString()},o.prototype.getProvider=function(){return this.provider},o.prototype.getProviderScope=function(){return this.providerScope},o.prototype.getRedirectUri=function(){return this.redirectUri},o.prototype.getScope=function(){return this.scope},o.prototype.setProviderScope=function(t){e(t,"Provider scope must be a string"),this.providerScope=t},o.prototype.setRedirectUri=function(t){e(t,"Redirect uri must be a string"),this.redirectUri=t},o.prototype.setScope=function(t){e(t,"Scope must be a string"),this.scope=t},o}();this.wedeploy.AuthProvider=o}.call(this),function(){var e=this.wedeploy.AuthProvider,n=function(e){function n(){t.classCallCheck(this,n);var r=t.possibleConstructorReturn(this,e.call(this));return r.provider=n.PROVIDER,r}return t.inherits(n,e),n}(e);n.PROVIDER="github",this.wedeploy.GithubAuthProvider=n}.call(this),function(){var e=this.wedeploy.AuthProvider,n=function(e){function n(){t.classCallCheck(this,n);var r=t.possibleConstructorReturn(this,e.call(this));
return r.provider=n.PROVIDER,r}return t.inherits(n,e),n}(e);n.PROVIDER="google",this.wedeploy.GoogleAuthProvider=n}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.prototype.clear=function(){throw Error("Unimplemented abstract method")},e.prototype.set=function(t,e){throw Error("Unimplemented abstract method")},e.prototype.get=function(t){throw Error("Unimplemented abstract method")},e.prototype.keys=function(){throw Error("Unimplemented abstract method")},e.prototype.remove=function(t){throw Error("Unimplemented abstract method")},e.prototype.size=function(){throw Error("Unimplemented abstract method")},e}();this.wedeploy.StorageMechanism=e}.call(this),function(){function e(t){if(!r.isDefAndNotNull(t))throw Error("Storage mechanism is required")}function n(t){if(!(t instanceof o))throw Error("Storage mechanism must me an implementation of StorageMechanism")}var r=this.wedeploy.metal,o=this.wedeploy.StorageMechanism,i=function(){function o(r){t.classCallCheck(this,o),e(r),n(r),this.mechanism=r}return o.prototype.clear=function(){this.mechanism.clear()},o.prototype.set=function(t,e){return r.isDef(e)?void this.mechanism.set(t,JSON.stringify(e)):void this.mechanism.remove(t)},o.prototype.get=function(t){var e;try{e=this.mechanism.get(t)}catch(n){return}if(!r.isNull(e))try{return JSON.parse(e)}catch(n){throw o.ErrorCode.INVALID_VALUE}},o.prototype.keys=function(){return this.mechanism.keys()},o.prototype.remove=function(t){this.mechanism.remove(t)},o.prototype.size=function(){return this.mechanism.size()},o.prototype.values=function(){var t=this;return this.keys().map(function(e){return t.get(e)})},o}();i.ErrorCode={INVALID_VALUE:"Storage: Invalid value was encountered"},this.wedeploy.Storage=i}.call(this),function(){var e=this.wedeploy.StorageMechanism,n=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n.prototype.storage=function(){return n.globals.localStorage},n.prototype.clear=function(){this.storage().clear()},n.prototype.keys=function(){return Object.keys(this.storage())},n.prototype.get=function(t){return this.storage().getItem(t)},n.prototype.remove=function(t){this.storage().removeItem(t)},n.prototype.set=function(t,e){this.storage().setItem(t,e)},n.prototype.size=function(){return this.storage().length},n}(e);n.globals={localStorage:window.localStorage},this.wedeploy.LocalStorageMechanism=n}.call(this),function(){var t=this.wedeploy.Storage,e=this.wedeploy.StorageMechanism,n=this.wedeploy.LocalStorageMechanism;this.wedeployNamed.storage=this.wedeployNamed.storage||{},this.wedeployNamed.storage.Storage=t,this.wedeployNamed.storage.StorageMechanism=e,this.wedeployNamed.storage.LocalStorageMechanism=n}.call(this),function(){function e(t){switch(t.constructor.PROVIDER){case r.PROVIDER:case i.PROVIDER:break;default:throw new Error("Sign-in provider not supported")}}var n=this.wedeploy.Auth,r=this.wedeploy.GithubAuthProvider,o=this.wedeploy.globals,i=this.wedeploy.GoogleAuthProvider,s=this.wedeployNamed.storage.Storage,a=this.wedeployNamed.storage.LocalStorageMechanism,u=this.wedeployNamed.assertions.assertDefAndNotNull,l=this.wedeployNamed.assertions.assertFunction,c=this.wedeployNamed.assertions.assertObject,h=this.wedeployNamed.assertions.assertUserSignedIn,p=this.wedeployNamed.assertions.assertBrowserEnvironment,d=this.wedeployNamed.assertions.assertResponseSucceeded,f=function(){function f(){t.classCallCheck(this,f),this.currentUser=null,this.onSignInCallback=null,this.wedeployClient=null,this.storage=new s(new a),this.maybeLoadCurrentUserFromLocalStorage(),this.provider={Google:i,Github:r}}return f.prototype.createUser=function(t){var e=this;return c(t,"User data must be specified as object"),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/users").post(t).then(function(t){return d(t)}).then(function(t){return e.makeUserAuthFromData(t.body())})},f.prototype.getHrefWithoutFragment_=function(){var t=o.window.location;return t.protocol+"//"+t.host+t.pathname+(t.search?t.search:"")},f.prototype.getRedirectAccessToken_=function(){if(o.window){var t=o.window.location.hash;if(0===t.indexOf("#access_token="))return o.window.location.hash="",t.substring(14)}return null},f.prototype.getUser=function(t){return u(t,"User userId must be specified"),h(this.currentUser),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/users",t).auth(this.currentUser.token).get().then(function(t){return d(t)})},f.prototype.loadCurrentUser=function(t){var e=this;return u(t,"User token must be specified"),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/user").auth(t).get().then(function(n){var r=n.body();return r.token=t,e.currentUser=e.makeUserAuthFromData(r),e.storage.set("currentUser",r),e.currentUser})},f.prototype.makeUserAuthFromData=function(t){var e=new n;return e.setWedeployClient(this.wedeployClient),e.setCreatedAt(t.createdAt),e.setEmail(t.email),e.setId(t.id),e.setName(t.name),e.setPhotoUrl(t.photoUrl),e.setToken(t.token),e},f.prototype.maybeLoadCurrentUserFromLocalStorage=function(){var t=this.storage.get("currentUser");t&&(this.currentUser=this.makeUserAuthFromData(t))},f.prototype.onSignIn=function(t){var e=this;l(t,"Sign-in callback must be a function"),this.onSignInCallback=t;var n=this.getRedirectAccessToken_();n&&this.loadCurrentUser(n).then(function(){return e.onSignInCallback.call(e,e.currentUser)})},f.prototype.sendPasswordResetEmail=function(t){return u(t,"Send password reset email must be specified"),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/user/recover").param("email",t).post().then(function(t){return d(t)})},f.prototype.signInWithEmailAndPassword=function(t,e){var n=this;return u(t,"Sign-in email must be specified"),u(e,"Sign-in password must be specified"),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/oauth/token").param("grant_type","password").param("username",t).param("password",e).get().then(function(t){return d(t)}).then(function(t){return n.loadCurrentUser(t.body().access_token)})},f.prototype.signInWithRedirect=function(t){p(),u(t,"Sign-in provider must be defined"),e(t),t.hasRedirectUri()||t.setRedirectUri(this.getHrefWithoutFragment_()),o.window.location.href=t.makeAuthorizationUrl(this.wedeployClient.authUrl_)},f.prototype.signOut=function(){var t=this;return h(this.currentUser),this.wedeployClient.url(this.wedeployClient.authUrl_).path("/oauth/revoke").param("token",this.currentUser.token).get().then(function(t){return d(t)}).then(function(e){return t.unloadCurrentUser(),e})},f.prototype.setWedeployClient=function(t){this.wedeployClient=t},f.prototype.unloadCurrentUser=function(){this.currentUser=null,this.storage.remove("currentUser")},f}();this.wedeploy.AuthApiHelper=f}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.encodeString=function(t){return"function"==typeof btoa?btoa(t):new Buffer(t.toString(),"binary")},e}();this.wedeploy.Base64=e}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e),this.body_={}}return e.prototype.body=function(){return this.body_},e.toBody=function(t){return t instanceof e?t.body():t},e.prototype.toString=function(){return JSON.stringify(this.body())},e}();this.wedeploy.Embodied=e}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.Embodied,r=function(){function r(o,i,s){t.classCallCheck(this,r);var a={operator:e.isDef(s)?i:"="},u=e.isDef(s)?s:i;e.isDefAndNotNull(u)&&(u instanceof n&&(u=u.body()),a.value=u),this.createBody_(o,a)}return r.prototype.add=function(t,e){e?this.addArrayOperator_(t,e):this.createBody_(t,this.body_)},r.prototype.addArrayOperator_=function(t,e){this.body_[t]instanceof Array||this.createBody_(t,[this.body_]),this.body_[t].push(e.body())},r.prototype.addMany=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var o=0;o<n.length;o++)this.add(t,n[o])},r.prototype.createBody_=function(t,e){this.body_={},this.body_[t]=e},r.prototype.getObject=function(){return this.body_},r}();this.wedeploy.FilterBody=r}.call(this),function(){var e=this.wedeploy.Embodied,n=function(){function e(){t.classCallCheck(this,e)}return e.boundingBox=function(t,n){return new e.BoundingBox(t,n)},e.circle=function(t,n){return new e.Circle(t,n)},e.line=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e.Line,[null].concat(n)))},e.point=function(t,n){return new e.Point(t,n)},e.polygon=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e.Polygon,[null].concat(n)))},e}(),r=function(e){function n(r,o){t.classCallCheck(this,n);var i=t.possibleConstructorReturn(this,e.call(this));return i.body_=[r,o],i}return t.inherits(n,e),n}(e);n.Point=r;var o=function(n){function r(){t.classCallCheck(this,r);for(var o=t.possibleConstructorReturn(this,n.call(this)),i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return o.body_={type:"linestring",coordinates:s.map(function(t){return e.toBody(t)})},o}return t.inherits(r,n),r}(e);n.Line=o;var i=function(n){function r(o,i){t.classCallCheck(this,r);var s=t.possibleConstructorReturn(this,n.call(this));return s.body_={type:"envelope",coordinates:[e.toBody(o),e.toBody(i)]},s}return t.inherits(r,n),r.prototype.getPoints=function(){return this.body_.coordinates},r}(e);n.BoundingBox=i;var s=function(n){function r(o,i){t.classCallCheck(this,r);var s=t.possibleConstructorReturn(this,n.call(this));return s.body_={type:"circle",coordinates:e.toBody(o),radius:i},s}return t.inherits(r,n),r.prototype.getCenter=function(){return this.body_.coordinates},r.prototype.getRadius=function(){return this.body_.radius},r}(e);n.Circle=s;var a=function(n){function r(){t.classCallCheck(this,r);var e=t.possibleConstructorReturn(this,n.call(this));return e.body_={type:"polygon",coordinates:[]},e.addCoordinates_.apply(e,arguments),e}return t.inherits(r,n),r.prototype.addCoordinates_=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.body_.coordinates.push(n.map(function(t){return e.toBody(t)}))},r.prototype.hole=function(){return this.addCoordinates_.apply(this,arguments),this},r}(e);n.Polygon=a,this.wedeploy.Geo=n}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.Embodied,r=function(n){function r(o,i){t.classCallCheck(this,r);var s=t.possibleConstructorReturn(this,n.call(this));return e.isDefAndNotNull(o)&&(s.body_.from=o),e.isDefAndNotNull(i)&&(s.body_.to=i),s}return t.inherits(r,n),r.from=function(t){return new r(t)},r.range=function(t,e){return new r(t,e)},r.to=function(t){return new r(null,t)},r}(n);this.wedeploy.Range=r}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.Embodied,r=this.wedeploy.FilterBody,o=this.wedeploy.Geo,i=this.wedeploy.Range,s=function(s){function a(e,n,o){t.classCallCheck(this,a);var i=t.possibleConstructorReturn(this,s.call(this));return i.body_=new r(e,n,o),i}return t.inherits(a,s),a.prototype.add=function(t,e,n,r){var o=e?a.toFilter(e,n,r):null;return this.body_.add(t,o),this},a.prototype.addMany=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=this.body_).addMany.apply(e,[t].concat(r)),this},a.prototype.and=function(t,e,n){return this.add("and",t,e,n)},a.any=function(t){var e=Array.prototype.slice.call(arguments,1);return 1===e.length&&e[0]instanceof Array&&(e=e[0]),new a(t,"any",e)},a.boundingBox=function(e,n,r){return n instanceof o.BoundingBox?a.polygon.apply(a,[e].concat(t.toConsumableArray(n.getPoints()))):a.polygon(e,n,r)},a.prototype.body=function(){return this.body_.getObject()},a.distance=function(t,e,n){var r=e,s=n;return e instanceof o.Circle?(r=e.getCenter(),s=i.to(e.getRadius())):n instanceof i||(s=i.to(n)),a.distanceInternal_(t,r,s)},a.distanceInternal_=function(t,e,r){var o={location:n.toBody(e)};return r=r.body(),r.from&&(o.min=r.from),r.to&&(o.max=r.to),a.field(t,"gd",o)},a.equal=function(t,e){return new a(t,"=",e)},a.exists=function(t){return a.field(t,"exists",null)},a.fuzzy=function(t,e,n){return a.fuzzyInternal_("fuzzy",t,e,n)},a.fuzzyInternal_=function(t,n,r,o){var i=e.isString(r),s={query:i?r:n},u=i?o:r;u&&(s.fuzziness=u);var l=i?n:a.ALL;return a.field(l,t,s)},a.gt=function(t,e){return new a(t,">",e)},a.gte=function(t,e){return new a(t,">=",e)},a.match=function(t,n){var r=e.isString(n)?t:a.ALL,o=e.isString(n)?n:t;return a.field(r,"match",o)},a.missing=function(t){return a.field(t,"missing",null)},a.phrase=function(t,n){var r=e.isString(n)?t:a.ALL,o=e.isString(n)?n:t;return a.field(r,"phrase",o)},a.polygon=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return r=r.map(function(t){return n.toBody(t)}),a.field(t,"gp",r)},a.prefix=function(t,e){var n=e?t:a.ALL,r=e?e:t;return a.field(n,"prefix",r)},a.range=function u(t,e,n){var u=e;return u instanceof i||(u=i.range(e,n)),a.field(t,"range",u)},a.regex=function(t,e){return new a(t,"~",e)},a.shape=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];r=r.map(function(t){return n.toBody(t)});var i={type:"geometrycollection",geometries:r};return a.field(t,"gs",i)},a.similar=function(t,n){var r=e.isString(n)?t:a.ALL,o={query:e.isString(n)?n:t};return a.field(r,"similar",o)},a.lt=function(t,e){return new a(t,"<",e)},a.lte=function(t,e){return new a(t,"<=",e)},a.none=function(t){var e=Array.prototype.slice.call(arguments,1);return 1===e.length&&e[0]instanceof Array&&(e=e[0]),new a(t,"none",e)},a.notEqual=function(t,e){return new a(t,"!=",e)},a.not=function(t,e,n){return a.toFilter(t,e,n).add("not")},a.field=function(t,e,n){return new a(t,e,n)},a.prototype.or=function(t,e,n){return this.add("or",t,e,n)},a.toFilter=function(t,e,n){var r=t;return r instanceof a||(r=a.field(t,e,n)),r},a}(n);s.ALL="*",this.wedeploy.Filter=s}.call(this),function(){var e=this.wedeploy.Embodied,n=this.wedeploy.Range,r=function(){function e(n,r,o){t.classCallCheck(this,e),this.field_=n,this.operator_=r,this.value_=o}return e.avg=function(t){return e.field(t,"avg")},e.count=function(t){return e.field(t,"count")},e.distance=function(t,n){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return new(Function.prototype.bind.apply(e.DistanceAggregation,[null].concat([t,n],o)))},e.extendedStats=function(t){return e.field(t,"extendedStats")},e.prototype.getField=function(){return this.field_},e.prototype.getOperator=function(){return this.operator_},e.prototype.getValue=function(){return this.value_},e.histogram=function(t,n){return new e(t,"histogram",n)},e.max=function(t){return e.field(t,"max")},e.min=function(t){return e.field(t,"min")},e.missing=function(t){return e.field(t,"missing")},e.field=function(t,n){return new e(t,n)},e.range=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new(Function.prototype.bind.apply(e.RangeAggregation,[null].concat([t],r)))},e.stats=function(t){return e.field(t,"stats")},e.sum=function(t){return e.field(t,"sum")},e.terms=function(t){return e.field(t,"terms")},e}(),o=function(r){function o(n,i){t.classCallCheck(this,o);var s=t.possibleConstructorReturn(this,r.call(this,n,"geoDistance",{}));s.value_.location=e.toBody(i);for(var a=arguments.length,u=Array(a>2?a-2:0),l=2;l<a;l++)u[l-2]=arguments[l];return s.value_.ranges=u.map(function(t){return t.body()}),s}return t.inherits(o,r),o.prototype.range=function i(t,e){var i=t;return i instanceof n||(i=n.range(t,e)),this.value_.ranges.push(i.body()),this},o.prototype.unit=function(t){return this.value_.unit=t,this},o}(r);r.DistanceAggregation=o;var i=function(e){function r(n){t.classCallCheck(this,r);for(var o=t.possibleConstructorReturn(this,e.call(this,n,"range")),i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return o.value_=s.map(function(t){return t.body()}),o}return t.inherits(r,e),r.prototype.range=function o(t,e){var o=t;return o instanceof n||(o=n.range(t,e)),this.value_.push(o.body()),this},r}(r);r.RangeAggregation=i,this.wedeploy.Aggregation=r}.call(this),function(){var e=this.wedeployNamed.metal.core,n=this.wedeploy.Embodied,r=this.wedeploy.Filter,o=this.wedeploy.Aggregation,i=function(n){function i(){return t.classCallCheck(this,i),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(i,n),i.aggregate=function(t,e,n){return(new i).aggregate(t,e,n)},i.count=function(){return(new i).type("count")},i.fetch=function(){return(new i).type("fetch")},i.filter=function(t,e,n){return(new i).filter(t,e,n)},i.offset=function(t){return(new i).offset(t)},i.highlight=function(t){return(new i).highlight(t)},i.limit=function(t){return(new i).limit(t)},i.search=function(t,e,n){return(new i).search(t,e,n)},i.sort=function(t,e){return(new i).sort(t,e)},i.type=function(t){return(new i).type(t)},i.prototype.aggregate=function(t,n,r){var i=n;i instanceof o||(i=o.field(n,r));var s=i.getField(),a={};return a[s]={name:t,operator:i.getOperator()},e.isDefAndNotNull(i.getValue())&&(a[s].value=i.getValue()),this.body_.aggregation||(this.body_.aggregation=[]),this.body_.aggregation.push(a),this},i.prototype.count=function(){return this.type("count")},i.prototype.fetch=function(){return this.type("fetch")},i.prototype.filter=function s(t,e,n){var s=r.toFilter(t,e,n);return this.body_.filter||(this.body_.filter=[]),this.body_.filter.push(s.body()),this},i.prototype.offset=function(t){return this.body_.offset=t,this},i.prototype.highlight=function(t){return this.body_.highlight||(this.body_.highlight=[]),this.body_.highlight.push(t),this},i.prototype.limit=function(t){return this.body_.limit=t,this},i.prototype.search=function(t,e,n){var o=t;return n?o=r.field(t,e,n):e?o=r.match(t,e):o instanceof r||(o=r.match(t)),this.body_.search||(this.body_.search=[]),this.body_.search.push(o.body()),this},i.prototype.sort=function(t,e){this.body_.sort||(this.body_.sort=[]);var n={};return n[t]=e||"asc",this.body_.sort.push(n),this},i.prototype.type=function(t){return this.body_.type=t,this},i}(n);this.wedeploy.Query=i}.call(this),function(){var e,n=this.wedeploy.globals,r=this.wedeployNamed.metal.core,o=this.wedeploy.Auth,i=this.wedeploy.AuthApiHelper,s=this.wedeploy.Base64,a=this.wedeploy.Embodied,u=this.wedeploy.Filter,l=this.wedeploy.Query,c=this.wedeploy.TransportFactory,h=this.wedeploy.ClientRequest,p=this.wedeployNamed.structs.MultiMap,d=this.wedeploy.Uri;"undefined"!=typeof n.window&&(e=n.window.io);var f=function(){function n(e){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(t.classCallCheck(this,n),0===arguments.length)throw new Error("Invalid arguments, try `new WeDeploy(baseUrl, url)`");this.auth_=null,this.body_=null,this.url_=d.joinPaths.apply(d,[e||""].concat(o)),this.headers_=new p,this.params_=new p,this.header("Content-Type","application/json"),this.header("X-PJAX","true"),this.header("X-Requested-With","XMLHttpRequest")}return n.prototype.aggregate=function(t,e,n){return this.getOrCreateQuery_().aggregate(t,e,n),this},n.prototype.auth=function(t,e){return this.auth_=t,this.auth_ instanceof o||(this.auth_=o.create(t,e)),this},n.auth=function(t){return r.isString(t)&&(n.authUrl_=t),n.auth_||(n.auth_=new i,n.auth_.setWedeployClient(n)),n.auth_},n.prototype.body=function(t){return this.body_=t,this},n.prototype.convertBodyToParams_=function(t,e){r.isString(e)?e={body:e}:e instanceof a&&(e=e.body()),Object.keys(e||{}).forEach(function(n){return t.param(n,e[n])})},n.prototype.count=function(){return this.getOrCreateQuery_().type("count"),this},n.prototype.createClientRequest_=function(t,e){var n=new h;return n.body(e||this.body_),r.isDefAndNotNull(n.body())||(this.query_?n.body(this.query_.body()):this.formData_&&n.body(this.formData_)),n.method(t),n.headers(this.headers()),n.params(this.params()),n.url(this.url()),this.encode(n),n},n.prototype.decode=function(t){if(n.isContentTypeJson(t))try{t.body(JSON.parse(t.body()))}catch(e){}return t},n.prototype["delete"]=function(t){return this.sendAsync("DELETE",t)},n.prototype.encode=function(t){var e=t.body();return r.isElement(e)&&(e=new FormData(e),t.body(e)),e=this.wrapWithQuery_(e),"GET"===t.method()&&(this.convertBodyToParams_(t,e),t.removeBody(),e=null),"undefined"!=typeof FormData&&e instanceof FormData?t.headers().remove("content-type"):e instanceof a?t.body(e.toString()):n.isContentTypeJson(t)&&t.body(JSON.stringify(t.body())),this.encodeParams_(t),this.resolveAuthentication_(t),t},n.prototype.encodeParams_=function(t){var e=t.params();e.names().forEach(function(t){var n=e.getAll(t);n.forEach(function(t,e){t instanceof a?t=t.toString():(r.isObject(t)||t instanceof Array)&&(t=JSON.stringify(t)),n[e]=t})})},n.prototype.filter=function(t,e,n){return this.getOrCreateQuery_().filter(t,e,n),this},n.prototype.form=function(t,e){if("undefined"==typeof FormData)throw new Error("form() is only available when FormData API is available.");return this.formData_||(this.formData_=new FormData),this.formData_.append(t,e),this},n.prototype.get=function(t){return this.sendAsync("GET",t)},n.prototype.getOrCreateQuery_=function(){return this.query_||(this.query_=new l),this.query_},n.prototype.header=function(t,e){if(2!==arguments.length)throw new Error("Invalid arguments");return this.headers_.set(t,e),this},n.prototype.headers=function(){return this.headers_},n.prototype.highlight=function(t){return this.getOrCreateQuery_().highlight(t),this},n.prototype.limit=function(t){return this.getOrCreateQuery_().limit(t),this},n.prototype.offset=function(t){return this.getOrCreateQuery_().offset(t),this},n.prototype.param=function(t,e){if(2!==arguments.length)throw new Error("Invalid arguments");return this.params_.set(t,e),this},n.prototype.params=function(){return this.params_},n.prototype.patch=function(t){return this.sendAsync("PATCH",t)},n.prototype.path=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return(new(Function.prototype.bind.apply(n,[null].concat([this.url()],e)))).use(this.customTransport_)},n.prototype.post=function(t){return this.sendAsync("POST",t)},n.prototype.put=function(t){return this.sendAsync("PUT",t)},n.prototype.resolveAuthentication_=function(t){if(this.auth_)if(this.auth_.hasToken())t.header("Authorization","Bearer "+this.auth_.token);else{var e=this.auth_.email+":"+this.auth_.password;t.header("Authorization","Basic "+s.encodeString(e))}},n.prototype.search=function(t,e,n){return this.getOrCreateQuery_().search(t,e,n),this},n.prototype.sendAsync=function(t,e){var n=this.customTransport_||c.instance().getDefault(),r=this.createClientRequest_(t,e);return n.send(r).then(this.decode)},n.socket=function(t){e=t},n.prototype.sort=function(t,e){return this.getOrCreateQuery_().sort(t,e),this},n.url=function(t){return new n(t).use(this.customTransport_)},n.prototype.url=function(){return this.url_},n.prototype.use=function(t){return this.customTransport_=t,this},n.prototype.watch=function(t,n){if("undefined"==typeof e)throw new Error("Socket.io client not loaded");var r=this.createClientRequest_("GET",t),o=new d(r.url());return o.addParametersFromMultiMap(r.params()),n=n||{forceNew:!0},n.query="url="+encodeURIComponent(o.getPathname()+o.getSearch()),n.path=n.path||o.getPathname(),e(o.getHost(),n)},n.prototype.wrapWithQuery_=function(t){return t instanceof u&&(t=l.filter(t)),t},n}();f.isContentTypeJson=function(t){var e=t.headers().get("content-type")||"";return 0===e.indexOf("application/json")},f.auth_=null,f.authUrl_="",this.wedeploy.WeDeploy=f}.call(this),function(){var t=this.wedeploy.globals,e=this.wedeploy.Filter,n=this.wedeploy.Geo,r=this.wedeploy.WeDeploy,o=this.wedeploy.Query,i=this.wedeploy.Range;t.window.Filter=e,t.window.Geo=n,t.window.Query=o,t.window.Range=i,t.window.WeDeploy=r}.call(this)}).call(this);